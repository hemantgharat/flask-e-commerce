(function(q){var r=window.AmazonUIPageJS||window.P,x=r._namespace||r.attributeErrors,a=x?x("DetailPageAttachAssets",""):r;a.guardFatal?a.guardFatal(q)(a,window):a.execute(function(){q(a,window)})})(function(q,r,x){"use strict";q.when("A").register("attach-variant-registration",function(a){var b={};return{registerVariantFlag:function(a){if(b.hasOwnProperty(a))throw"Variant flag already registered";b[a]=!0},getVariantFlag:function(a){return b.hasOwnProperty(a)}}});"use strict";q.when("attach-variant-registration").execute(function(a){a.registerVariantFlag("HCTP_DP_ATTACH_DYNAMIC_BUNDLING_MOBILE_249346:T1")});
"use strict";q.when("A").register("attach-baselink",function(){var a=null;q.when("BaseLinkFormHelper").execute(function(b){a=b});return{createBaseLinkFormFields:function(b,h){return a?a.addBaseLinkFields(b,h):null}}});"use strict";q.when("A").register("attach-external-atc-interceptor",function(a){var b=a.$,h=[],f=[],g=!1,p=!1,c=function(){p=!0},d=function(a){var c=f.indexOf(a);-1<c&&(a=b("#attach_add_accessory_alert_"+c),c=b("#attach_add_accessory_button_"+c),a&&c&&(a.removeClass("aok-hidden"),c.addClass("aok-hidden")))};
return{updateAttachModule:function(a){c&&(g?d(a):h.push(a))},loadAttachModule:function(a){if(p)for(g=!0,f=a;0<h.length;)a=h.shift(),d(a)},unloadAttachModule:function(){g=!1;f=[]},enableModule:c}});"use strict";q.when("A").register("attach-preinitiate-checkout",function(a){return{getCartInitiateId:function(){return(new Date).getTime()},preinitiateCheckout:function(b){var h;h=a.$("#attach-desktop-sideSheet");var f=a.$("#attach_accessory_sheet");h=h.length?h:f;h.find("iframe#checkoutPrefetch").remove();
b="/gp/cart/checkout-prefetch.html?\x26cartInitiateId\x3d"+b;f=document.createElement("iframe");f.setAttribute("src",b);f.setAttribute("style","width:0px;height:0px;display:none;position:absolute;");f.setAttribute("name","checkoutPrefetch");f.setAttribute("id","checkoutPrefetch");h.append(f)}}});"use strict";q.when("A","attach-common","attach-variant-registration").register("attach-weblabs",function(a,b,h){function f(b){var c=a.$(b).val();b=[];if(c&&0<c.length)for(var c=c.slice(1,-1).split(","),g=
0;g<c.length;g++){var p=c[g].trim();0<p.length&&b.push(p)}return b}var g={},p=g.Selectors={CORE_FREE_SHIPPING_MESSAGE:"#attach-core-free-shipping-message",CLIENT_SIDE_ATTACH_WEBLABS:"#attach-weblabsToTriggerClientSide",CLIENT_SIDE_EMPTY_ASIN_LIST_WEBLABS:"#attach-weblabsToTriggerClientSideWhenEmptyAsinList",WEBLABS_TO_TRIGGER_ON_ADD_TO_CART:"#attach-weblabsToTriggerOnAddToCart",SHOW_ACCESSORY_COUPONS_DSS:"#attach-accessory-coupons-dss",SHOW_ACCESSORY_COUPONS_MBS:"#attach-accessory-coupons-mbs",DEBUG_IS_DEBUG:"#attach-debug-isDebug",
DEBUG_QUERY_STRING:"#attach-debug-queryString",ATTACH_MARKETPLACE_ID:"#attach-marketplaceId"},c=g.Marketplaces={IN:"A21TJRUUN4KGV"};g.isWarrantyPaneSuppressed=function(){return a.$(p.ATTACH_MARKETPLACE_ID).val()===c.IN};g.isShowAccessoryCouponsDssEnabled=function(){return b.elementExists(p.SHOW_ACCESSORY_COUPONS_DSS)};g.isShowAccessoryCouponsMbsEnabled=function(){return b.elementExists(p.SHOW_ACCESSORY_COUPONS_MBS)};g.isCoreFreeShippingMessageEnabled=function(){return b.elementExists(p.CORE_FREE_SHIPPING_MESSAGE)};
g.isInstallmentsDssIntegrationEnabled=function(){return h.getVariantFlag("DP_INSTALLMENTS_DSS_231673:T1")};g.isAttachDebugParametersEnabled=function(){return 0<a.$(p.DEBUG_IS_DEBUG).length||0<a.$(p.DEBUG_QUERY_STRING).length};g.isAttachDynamicBundlingEnabled=function(){return h.getVariantFlag("HCTP_DP_ATTACH_DYNAMIC_BUNDLING_MOBILE_249346:T1")};g.isWarrantyServerSideDSSEnabled=function(){return h.getVariantFlag("WTY_DSS_SERVERSIDE_273709:T1")};g.isWarrantyServerSideMBSEnabled=function(){return h.getVariantFlag("WTY_MBS_SERVERSIDE_273712:T1")};
g.isTradeInDSSEnabled=function(){return h.getVariantFlag("CETECH_TRADEIN_ATTACH_DSS_EXPERIMENT_318373:T1")};g.servicesInterstitialDeprecated=function(){return b.elementExists("#attachSIDeprecated")};g.getWeblabsToTriggerClientSide=function(){return f(p.CLIENT_SIDE_ATTACH_WEBLABS)};g.getWeblabsToTriggerClientSideForEmptyAsinList=function(){return f(p.CLIENT_SIDE_EMPTY_ASIN_LIST_WEBLABS)};g.getWeblabsToTriggerOnAddToCart=function(){return f(p.WEBLABS_TO_TRIGGER_ON_ADD_TO_CART).map(function(a){return a.split(":")[0]})};
g.getAllWeblabsToTriggerClientSide=function(){var a=g.getWeblabsToTriggerClientSide(),a=a.concat(g.getWeblabsToTriggerClientSideForEmptyAsinList());return a.concat(g.getWeblabsToTriggerOnAddToCart())};g.triggerClientSideWeblabs=function(b){b=b||[];b=b.concat(g.getAllWeblabsToTriggerClientSide());0<b.length&&(b=a.$.param({weblabs:b},!0),a.$.post("/gp/product/features/aloha-ppd/getTreatmentAndRecordWeblabs.html",b))};return g});"use strict";q.when("A").register("attach-logging",function(a){var b={},
h,f,g;b.NEXUS={PRODUCER_ID:"atch",ACCESSORY_IMPRESSIONS_PREFIX:"attach.AccessoryImpressions.",ACCESSORY_IMPRESSIONS_SCHEMA_VERSION:"10",ADD_ACCESSORY_PREFIX:"attach.AddAccessoryToCart.",ADD_ACCESSORY_SCHEMA_VERSION:"14",ADD_WARRANTY_PREFIX:"attach.AddWarrantyToCart.",ADD_WARRANTY_SCHEMA_VERSION:"5",WARRANTY_IMPRESSION_PREFIX:"attach.WarrantyImpression.",WARRANTY_IMPRESSION_SCHEMA_VERSION:"6",DSS_WARNING_MESSAGE_PREFIX:"attach.DssWarningMessages.",DSS_WARNING_MESSAGE_VERSION:"2",PROMOTION_CLAIMED_PREFIX:"attach.ClaimPromotion.",
PROMOTION_CLAIMED_SCHEMA_VERSION:"2",ACCESSORY_TYPE:{ACCESSORY:"accessory",WARRANTY:"warranty"}};b.FEATURES={DSS:"dss"};b.REF_TAGS={WARRANTY_IMPRESSION:"dp_atch_dss_w_i_",WARRANTY_ADD_TO_CART:"dp_atch_dss_w_y_"};b.CSM_METRICS={ATTACH_BASE_ATC_CLICK:"attachDesktopBaseATCClick",ATTACH_BASE_ATC_FAILURE:"ATTACH_DSS_ADD_BASE_FAILURE",ATTACH_BASE_ATC_SUCCESS:"ATTACH_DSS_ADD_BASE_SUCCESS",ATTACH_CART_CLICK:"ATTACH_DSS_CART_BUTTON_CLICK",ATTACH_CHECKOUT_CLICK:"ATTACH_DSS_CHECKOUT_CLICK",ATTACH_GET_CART_DESCRIPTION_FAILURE:"ATTACH_DSS_GET_CART_DESCRIPTION_AJAX_FAILURE",
ATTACH_GET_CART_DESCRIPTION_SUCCESS:"ATTACH_DSS_GET_CART_DESCRIPTION_AJAX_SUCCESS",ATTACH_SHOW_LESS:"attachDesktopShowLess",ATTACH_SHOW_MORE:"attachDesktopShowMore",ATTACH_SIDE_SHEET_CLOSE:"attachDesktopSideSheetClose",ATTACH_UPSELL_ATC_CLICK:"attachDesktopUpsellATCClick",ATTACH_UPSELL_ATC_FAILURE:"ATTACH_DSS_ADD_ACCESSORY_FAILURE",ATTACH_UPSELL_ATC_LATENCY:"attach_desktop_upsell_atc_latency",ATTACH_UPSELL_ATC_SUCCESS:"ATTACH_DSS_ADD_ACCESSORY_SUCCESS",MINI_DP_ATC:"attachDesktopMiniDPATC",MINI_DP_BACK:"attachDesktopMiniDPBack",
MINI_DP_CANCEL:"attachDesktopMiniDPCancel",MINI_DP_CAROUSEL_THUMBNAIL_CHANGE:"attachDesktopMiniDPCarouselThumbnailChange",MINI_DP_DWELL_TIME:"attach_desktop_mini_dp_dwell_time",MINI_DP_OPEN:"attachDesktopMiniDPOpen",TRADEIN_LOAD_FAILURE:"ATTACH_TRADEIN_LOAD_FAILURE",TRADEIN_LOAD_TIMEOUT:"ATTACH_TRADEIN_LOAD_TIMEOUT"};b.ENDPOINTS={REF_TAG:"/gp/product/ajax-handlers/reftag.html?ref_\x3d"};b.initialize=function(a,b){h=a;f=b};b.setPayloadBuilder=function(a){g=function(){var c=a();c.feature=h;c.obfuscatedMarketplaceId=
f||r.ue_mid;c.producerId=b.NEXUS.PRODUCER_ID;c.requestId=b.getRandomHexString();return c}};b.getRandomHexString=function(){return Date.now().toString(10)+Math.random().toString(16).substring(2,13)};b.log=function(a,c){r.ue&&r.ue.event&&r.ue.event(a,b.NEXUS.PRODUCER_ID,c,{ssd:!0})};b.logAccessoryAddToCart=function(a){var c=b.NEXUS.ADD_ACCESSORY_PREFIX+b.NEXUS.ADD_ACCESSORY_SCHEMA_VERSION,d=g();d.type=b.NEXUS.ACCESSORY_TYPE.ACCESSORY;d.displayPosition=parseInt(a.index)+1;d.accessoryAsin=a.asin;d.accessoryAsinPrice=
a.priceFormatted;d.accessoryItemCurrencySymbol=a.currencySymbol;d.accessoryItemPriceDecimal=a.priceDecimal;d.couponType=a.couponType;d.couponDecimal=a.couponDecimal;d.dealType=a.dealType;d.dealPercentSavings=a.dealPercentSavings;d.dealDollarAmount=a.dealDollarAmount;d.categoryDisplayPosition=parseInt(a.categoryIndex)+1;d.categoryTitle=a.categoryTitle;d.displayPositionWithinCategory=parseInt(a.asinIndexWithinCategory)+1;b.log(d,c)};b.logAccessoryImpressions=function(a){var c=b.NEXUS.ACCESSORY_IMPRESSIONS_PREFIX+
b.NEXUS.ACCESSORY_IMPRESSIONS_SCHEMA_VERSION,d=g();d.accessories=[];for(var f=0;f<a.length;f++){var h=a[f];d.accessories.push({displayPosition:parseInt(h.index)+1,asin:h.asin,price:h.priceFormatted,currencySymbol:h.currencySymbol,priceDecimal:h.priceDecimal,couponType:h.couponType,couponDecimal:h.couponDecimal,dealType:h.dealType,dealPercentSavings:h.dealPercentSavings,dealDollarAmount:h.dealDollarAmount,categoryDisplayPosition:parseInt(h.categoryIndex)+1,categoryTitle:h.categoryTitle,displayPositionWithinCategory:parseInt(h.asinIndexWithinCategory)+
1})}b.log(d,c)};b.logWarrantyAddToCart=function(a){var c=b.NEXUS.ADD_WARRANTY_PREFIX+b.NEXUS.ADD_WARRANTY_SCHEMA_VERSION,d=g();d.asin=a.asin;d.price=a.priceFormatted;d.warrantyCurrencySymbol=a.currencySymbol;d.warrantyPriceDecimal=a.priceDecimal;b.log(d,c);b.logWarrantyRefTag(b.REF_TAGS.WARRANTY_ADD_TO_CART,a.asin)};b.logWarrantyImpression=function(a){var c=b.NEXUS.WARRANTY_IMPRESSION_PREFIX+b.NEXUS.WARRANTY_IMPRESSION_SCHEMA_VERSION,d=g();d.asin=a.asin;d.price=a.priceFormatted;d.warrantyCurrencySymbol=
a.currencySymbol;d.warrantyPriceDecimal=a.priceDecimal;b.log(d,c);b.logWarrantyRefTag(b.REF_TAGS.WARRANTY_IMPRESSION,a.asin)};b.logWarrantyRefTag=function(f,c){var d=g().baseAsin;a.get(b.ENDPOINTS.REF_TAG+(f+d+"_"+c))};b.logSecondarySheetRefTag=function(f){var c=g().baseAsin;a.get(b.ENDPOINTS.REF_TAG+(f+"_"+c))};b.logMapleError=function(){r.ue&&r.ue.count&&r.ue.count("MAPLE::DSS::Error",(r.ue.count("MAPLE::DSS::Error")||0)+1)};b.logCount=function(a,b){r.ue&&r.ue.count&&(b=b||1,r.ue.count(a,(r.ue.count(a)||
0)+b))};b.logDSSWarningMessage=function(a){var c=b.NEXUS.DSS_WARNING_MESSAGE_PREFIX+b.NEXUS.DSS_WARNING_MESSAGE_VERSION,d=g();b.log({quantity:d.quantity.toString(),baseAsin:d.baseAsin,warningMessage:a},c)};b.logPromotionClaimed=function(a){var c=b.NEXUS.PROMOTION_CLAIMED_PREFIX+b.NEXUS.PROMOTION_CLAIMED_SCHEMA_VERSION,d=g();d.asin=a.asin;d.accessoryCurrencySymbol=a.currencySymbol;d.accessoryPriceDecimal=a.priceDecimal;d.displayPosition=a.index+1;null!==a.couponType&&(d.promoDecimal=a.couponDecimal,
d.promoDecimalType=a.couponType,d.promoType="coupon");b.log(d,c)};b.isFunction=function(a){return"function"===typeof a};b.beginLatencyCapture=function(a){b.isFunction(r.uet)&&r.uet("bb",a,{wb:1})};b.endLatencyCapture=function(a){b.isFunction(r.uex)&&r.uex("ld",a,{wb:1})};return b});"use strict";q.when("A","attach-logging").register("attach-maple",function(a,b){var h={},f;h.initialize=function(){f=!1};h.loadBannerHTML=function(){var g=a.$.Deferred(),h={};f&&(h.cart=null);a.post("/gp/cobrandcard/dss-maple-banner.html",
{params:h,success:function(a){g.resolve(a)},error:function(){b.logMapleError();g.resolve(null)}});return g.promise()};h.suppressMathBox=function(){f=!0};h.updateMathBox=function(a){"undefined"!==typeof mapleMathBox&&null!==mapleMathBox&&mapleMathBox.updateMapleMath({totalCost:a})};return h});"use strict";q.when("A","attach-variant-registration","attach-logging").register("attach-common",function(a,b,h){function f(b){var t=g(b,k.UNIQ_ITEM_ASSOC_NAME),e=g(b,k.ITEM_ASSOC_TYPE_NAME),f=1,m=!1;null!==e&&
(d.itemAssocTypeValue=b.find(k.INPUT_NAME+e+k.CLOSED_BRACKET).val(),d.itemAssocTypeValue===k.ATTACH_ITEM_ASSOC_TYPE_VALUE&&(m=!0));null!==t?m?(e=g(b,k.ITEM_ASSOC_NAME),m=a.$("#attach-sessionId").val()+"-"+(new Date).getTime(),b.find(k.INPUT_NAME+t+k.CLOSED_BRACKET).val(m),b.find(k.INPUT_NAME+e+k.CLOSED_BRACKET).val(m),d.uniqueId=m):d.uniqueId=b.find(k.INPUT_NAME+t+k.CLOSED_BRACKET).val():(d.uniqueId=a.$("#attach-sessionId").val()+"-"+(new Date).getTime(),f=c(b,f),p(b,k.ITEM_ASSOC_NAME,d.uniqueId,
f),f++,f=c(b,f),p(b,k.UNIQ_ITEM_ASSOC_NAME,d.uniqueId,f),f++,f=c(b,f),p(b,k.ITEM_ASSOC_TYPE_NAME,d.itemAssocTypeValue,f),f++);f=c(b,f);p(b,k.ITEM_ASSOC_PROPERTIES_NAME,k.ITEM_ASSOC_PROPERTIES_VALUE,f)}function g(a,b){a=a.find(k.INPUT_VALUE+b+k.CLOSED_BRACKET);if(!a.length)return null;a=a[0].name.split(".");return 2<a.length?k.CUSTOM_VALUE_KEY+a[1]+"."+a[2]:null}function p(a,b,e,c){a.append('\x3cinput type\x3d"hidden" name\x3d"custom-name.1.'+c+'" value\x3d"'+b+'"/\x3e');a.append('\x3cinput type\x3d"hidden" name\x3d"custom-value.1.'+
c+'" value\x3d"'+e+'"/\x3e')}function c(a,b){for(;0<a.find('input[name\x3d"custom-name.1.'+b+'"]').length||0<a.find('input[name\x3d"custom-value.1.'+b+'"]').length;)b++;return b}var d={},k=d.ItemAssociationConstants={ITEM_ASSOC_NAME:"itemAssoc",UNIQ_ITEM_ASSOC_NAME:"UNIQ-itemAssoc",ITEM_ASSOC_TYPE_NAME:"itemAssocType",ATTACH_ITEM_ASSOC_TYPE_VALUE:"Attach",ITEM_ASSOC_RENDER_TYPE_NAME:"itemAssocRenderType",ITEM_ASSOC_RENDER_TYPE_VALUE:"renderAll",ITEM_ASSOC_PROPERTIES_NAME:"itemAssocProperties",ITEM_ASSOC_PROPERTIES_VALUE:"{\x26#34;QuantityEditable\x26#34;:\x26#34;1\x26#34;,\x26#34;QuantityInvarianceFactor\x26#34;:\x26#34;1\x26#34;}",
CUSTOM_VALUE_KEY:"custom-value.",INPUT_VALUE:"input[value\x3d'",INPUT_NAME:"input[name\x3d'",CLOSED_BRACKET:"']"};d.uniqueId=null;d.itemAssocTypeValue="Attach";d.FailureModes={ERROR_500:1,RESUBMIT_BUY_BOX:2,TRANSITION_TO_HUC:3,UNBIND_ATC:4};var n=d.Selectors={ADD_TO_CART_BUTTON:"#add-to-cart-button",TRADEIN_WIDGET_STATE:"#tanookiWidgetState",CUSTOMER_LOGGED_IN:"#attach-customer-logged-in"},l=d.TradeInEligibleGls=["gl_wireless","gl_electronics"];d.buyButton=a.$(n.ADD_TO_CART_BUTTON);d.reject=function(b,
c){return d.rejectPromise(a.$.Deferred(),b,c)};d.rejectPromise=function(b,c,e){if(e&&e.count&&r.ue&&r.ue.count)if("string"===typeof e.count)r.ue.count(e.count,1);else if(a.$.isArray(e.count))for(var g=0;g<e.count.length;g++)r.ue.count(e.count[g],1);return b.reject(c,e)};d.pipeJSON=function(a){try{return JSON.parse(a)}catch(b){return d.reject(null,{count:"ATTACH_DSS_JSON_PARSE_FAILURE"})}};d.unescapeJson=function(a){if(!a)return null;a=a.replace(/\|\|/g,'"');return a=a.replace(/&pipe;/g,"||")};d.elementExists=
function(b){return b?b instanceof a.$?0!==b.length:0!==a.$(b).length:!1};d.moduleExists=function(b){return(b=a.$("#"+b+"_feature_div").html())?0<b.trim().length:!1};d.isCurrencyOfPreferenceApplied=function(){return"true"===a.$("#attach-used-currency-of-preference").val()};d.hasWarranty=function(){return d.elementExists("#attachSIDeprecated")&&d.elementExists("#attach-warranty-pane")||0<a.$("#warrantyEscapedJson").length};d.hasAccessories=function(){return d.elementExists("#attach-asin-list")};d.hasTradein=
function(){if(0<a.$(n.TRADEIN_WIDGET_STATE).length){var b=a.$(n.TRADEIN_WIDGET_STATE).data("tanookiWidgetState");return b&&0<=l.indexOf(b.productGroup)}return!1};d.customerLoggedIn=function(){return"true"===a.$(n.CUSTOMER_LOGGED_IN).val()};d.submitATCForm=function(){var c=d.getAtcForm();b.getVariantFlag("HCTP_DP_ATTACH_DYNAMIC_BUNDLING_MOBILE_249346:T1")&&f(c);h.logCount(h.CSM_METRICS.ATTACH_BASE_ATC_CLICK);c=c.serialize();c=a.$.post("/gp/product/handle-buy-box/ref\x3ddp_start-bbf_1_glance",c);c.fail(function(){h.logCount(h.CSM_METRICS.ATTACH_BASE_ATC_FAILURE)});
a.trigger("attach:add-base-to-cart",c)};d.getAtcForm=function(){return d.buyButton.closest("form")};return d});"use strict";q.when("A","attach-common","attach-logging","attach-baselink","attach-weblabs","attach-variant-registration").register("attach-desktop-warranty-pane",function(a,b,h,f,g,p){function c(){for(var a=r.location.search.substring(1).split("\x26"),b=0;b<a.length;b++){var c=a[b].split("\x3d");if("smid"===c[0])return c[1]}return""}var d={name:"warranty"},k=d.Endpoints={RENDER:"/gp/product/features/aloha-ppd/udp-ajax-handler/warranty-render-desktop.html"},
n=d.Selectors={ASIN:"#attach-warranty-asin",PRICE_FORMATTED:"#attach-accessory-price-warranty",PRICE_AMOUNT:"#attach-accessory-price-warranty-amount",BASE_ASIN:"#ASIN",MARKETPLACE_ID:"#attach-marketplaceId",BASE_CURRENCY_SYMBOL:"#attach-base-product-currency-symbol",ATC_QUANTITY:"#quantity",ATC_WARRANTY:".attach-warranty-input",JSON_DATA:"#warrantyEscapedJson",PANE:"#attach-warranty-pane",PANE_IMAGE:"#attach-sheet-warranty-image",PANE_UPSELL_IMAGE:"#attach-sheet-warranty-upsell-image",PANE_ADD_BUTTON:"#attachSiAddCoverage",
PANE_NO_BUTTON:"#attachSiNoCoverage",PANE_WARRANTY_TITLE:"#attach-warranty-displayTitle",PANE_EXPERIMENT_DISPLAY:"#attach-warranty-experiment-display",PANE_REGULAR_DISPLAY:"#attach-warranty-display"};d.getWarrantyLoggingPayload=function(){var c=a.$(n.ASIN).val(),f=a.$(n.PRICE_FORMATTED),d=a.$(n.PRICE_AMOUNT);return!g.servicesInterstitialDeprecated()&&b.elementExists(d)?{asin:c,priceFormatted:f.text().trim(),priceDecimal:parseFloat(d.val())||null,currencySymbol:a.$(n.BASE_CURRENCY_SYMBOL).val()||null}:
{asin:c,priceFormatted:f.text().trim(),priceDecimal:null,currencySymbol:null}};d.appendWarrantyToATCForm=function(c,g){if(a.$(n.BASE_ASIN).val()&&c&&g){var d=b.getAtcForm();d.append('\x3cinput type\x3d"hidden" id\x3d"useABBHandler" class\x3d"attach-warranty-input" name\x3d"useABBHandler" value\x3d"1" /\x3e');var e=d.find("input[name^\x3d'offeringID']").length+1,h=a.$(n.ATC_QUANTITY).val()||1,m="quantity."+e,u="asin."+e;d.find('input[name\x3d"'+m+'"]').remove();d.find('input[name\x3d"'+u+'"]').remove();
d.append('\x3cinput type\x3d"hidden" id\x3d"'+m+'" name\x3d"'+m+'" value\x3d"'+h+'" class\x3d"attach-warranty-input" /\x3e');d.append('\x3cinput type\x3d"hidden" id\x3d"'+u+'" name\x3d"'+u+'" value\x3d"'+c+'" class\x3d"attach-warranty-input" /\x3e');d.append('\x3cinput type\x3d"hidden" id\x3d"offeringID.'+e+'" name\x3d"offeringID.'+e+'" value\x3d"'+g+'" class\x3d"attach-warranty-input"/\x3e');c=d.find('input[name\x3d"itemCount"]');0===c.length?d.append('\x3cinput type\x3d"hidden" name\x3d"itemCount" value\x3d"'+
e+'"\x3e'):c[0].value=e;a.$("#atch__bl").length&&f.createBaseLinkFormFields(e+1,d)}};d.clearWarrantyFromATCForm=function(){b.getAtcForm().find(n.ATC_WARRANTY).remove()};d.load=function(f){var w=r.ue,t;if(g.servicesInterstitialDeprecated()){if(b.elementExists(n.PANE))a.$(n.PANE).removeClass("aok-hidden");else return b.reject(b.FailureModes.RESUBMIT_BUY_BOX,{count:"ATTACH_DSS_WARRANTY_LOAD_FAILURE"});b.elementExists(n.PANE_EXPERIMENT_DISPLAY)&&(g.isWarrantyServerSideDSSEnabled()?(w&&w.trigger&&w.trigger("WTY_DSS_SERVERSIDE_273709",
"T1"),a.$(n.PANE_REGULAR_DISPLAY).remove()):(w&&w.trigger&&w.trigger("WTY_DSS_SERVERSIDE_273709","C"),a.$(n.PANE_EXPERIMENT_DISPLAY).remove()))}else{b.elementExists(n.JSON_DATA)&&(t=b.unescapeJson(a.$(n.JSON_DATA).val()),t=JSON.parse(t));if(!t)return b.reject(b.FailureModes.RESUBMIT_BUY_BOX,{count:"ATTACH_DSS_WARRANTY_LOAD_FAILURE"});if(!t.triggerInterstitialExperiment)return d.renderClientSide(f,t);if(!g.isWarrantyServerSideDSSEnabled())return w&&w.trigger&&w.trigger("WTY_DSS_SERVERSIDE_273709",
"C"),d.renderClientSide(f,t);w&&w.trigger&&w.trigger("WTY_DSS_SERVERSIDE_273709","T1");var e=a.$.Deferred(),w=a.$.get(k.RENDER+"?asin\x3d"+a.$(n.BASE_ASIN).val()+"\x26marketplaceId\x3d"+a.$(n.MARKETPLACE_ID).val()+"\x26smid\x3d"+c());a.$.when(w).done(function(a){f.$container.append(a);e.resolve()}).fail(function(){h.logCount("ATTACH_DSS_WARRANTY_AJAX_FAILURE");d.renderClientSide(f,t);e.resolve()});return e.promise()}};d.renderClientSide=function(b,c){if(c.triggerUpsellImageExperiment){var g=a.$.param({weblabs:["WTY_221862"]},
!0);a.$.post("/gp/product/features/aloha-ppd/getTreatmentAndRecordWeblabs.html",g)}var g="",e=c.baseASIN,d="dp_atch_dss_w_lm_"+e+"_"+c.asin,m="dp_atch_dss_w_r_"+e+"_"+c.asin,e="dp_atch_dss_w_lm_"+e+"_"+c.asin,u=a.$("#stringTranslation-si-warranty-title").val(),f=a.$("#stringTranslation-si-accident-protection").val(),h=a.$("#stringTranslation-si-from").val(),k=a.$("#stringTranslation-si-rating-out-of-5-stars").val(),n=a.$("#stringTranslation-item-added-to-cart").val(),p=a.$("#stringTranslation-desktop-attach-accessory-failed-add-to-cart").val(),
r=a.$("#stringTranslation-desktop-attach-accessory-retry").val(),q=a.$("#stringTranslation-si-add-coverage").val(),x=a.$("#stringTranslation-si-no-thanks").val(),C=a.$("#stringTranslation-services-bundle-detail-link").val(),g=g+('   \x3cdiv id\x3d"attach-warranty-pane" class\x3d"a-section"\x3e\n       \x3cdiv id\x3d"attach-warranty" class\x3d"a-section attach-sidesheet-card"\x3e\n           \x3cinput type\x3d"hidden" name\x3d"" value\x3d"'+c.asin+'" id\x3d"attach-warranty-asin"\x3e\n           \x3ch1 class\x3d"a-size-medium a-spacing-none a-color-base a-text-center"\x3e'+
u+'\x3c/h1\x3e\n           \x3chr class\x3d"a-spacing-base a-spacing-top-small a-divider-normal attach-warranty-divider"\x3e\n           \x3cdiv class\x3d"a-row a-spacing-micro"\x3e\n');null!==c.warrantyUpsellImage&&c.triggerUpsellImageExperiment&&(g+='                \x3cdiv class\x3d"a-row a-span-last"\x3e\n                    \x3cimg id\x3d"attach-sheet-warranty-upsell-image" src\x3d"" data-image-url\x3d"'+c.warrantyUpsellImage+'" class\x3d"attach-warranty-upsell-image"\x3e\n                \x3c/div\x3e\n                \x3cdiv class\x3d"a-row a-spacing-micro"\x3e\n');
null!==c.thumbImage&&(g+='                \x3cdiv class\x3d"a-column a-span2"\x3e\n                    \x3cimg id\x3d"attach-sheet-warranty-image" src\x3d"" data-image-url\x3d"'+c.thumbImage+'" class\x3d"attach-accessory-image"\x3e\n                \x3c/div\x3e\n');g+='                \x3cdiv class\x3d"a-column a-span10 a-span-last"\x3e\n                    \x3ca class\x3d"a-size-large a-spacing-micro a-link-normal a-color-base" id\x3d"attach-warranty-displayTitle" target\x3d"_blank" rel\x3d"noopener" href\x3d"/dp/'+
c.asin+"/ref\x3d"+d+'"\x3e\n                        \x3cstrong\x3e'+(null!==c.displayTitle?c.displayTitle:f.replace("${brandName}",c.brandName))+'\x3c/strong\x3e\n                    \x3c/a\x3e\n                    \x3cbr\x3e\n                    \x3cspan class\x3d"a-size-base a-color-secondary"\x3e'+h+" "+c.merchantName+"\x3c/span\x3e\n";Number(c.averageRating)&&Number(c.numReviews)&&Number(c.numFullStars)&&"boolean"===typeof c.hasHalfStar&&(d=k.replace("${averageRating}",c.averageRating),g+='                    \x3cdiv class\x3d"a-icon-row a-spacing-micro"\x3e\n                        \x3ca class\x3d"a-link-normal" href\x3d"/product-reviews/'+
c.asin+"/ref\x3d"+m+'?ie\x3dUTF8\x26amp;showViewpoints\x3d1"\x3e\n                            \x3ci class\x3d"a-icon a-icon-star a-star-'+c.numFullStars+(c.hasHalfStar?"-5":"")+'"\x3e\x3cspan class\x3d"a-icon-alt"\x3e'+d+'\x3c/span\x3e\x3c/i\x3e\n                        \x3c/a\x3e\n                        \x3ca class\x3d"a-link-normal" href\x3d"/product-reviews/'+c.asin+"/ref\x3d"+m+'?ie\x3dUTF8\x26amp;showViewpoints\x3d1"\x3e\n                            '+c.numReviews+"\n                        \x3c/a\x3e\n                    \x3c/div\x3e\n");
null!==c.buyingPriceAmount&&(g+='                    \x3cinput id\x3d"attach-accessory-price-warranty-amount" type\x3d"hidden" value\x3d"'+c.buyingPriceAmount+'"\x3e\n');g+='                    \x3cspan id\x3d"attach-accessory-price-warranty" class\x3d"a-size-large a-color-base attach-warranty-price"\x3e'+c.formattedBuyingPrice+'\x3c/span\x3e\n                \x3c/div\x3e\n            \x3c/div\x3e\n            \x3cdiv class\x3d"a-row"\x3e\n                \x3cdiv class\x3d"a-column a-span12"\x3e\n                    \x3cdiv id\x3d"warrantyBulletRowWrapper" class\x3d"a-section"\x3e\n                        \x3cdiv class\x3d"a-row a-spacing-micro"\x3e\n                            \x3cul class\x3d"a-unordered-list a-vertical a-spacing-none"\x3e\n';
for(m=0;m<c.bulletPoints.length;m++)g+='                                \x3cli\x3e\x3cspan class\x3d"a-list-item"\x3e'+c.bulletPoints[m].text+"\x3c/span\x3e\x3c/li\x3e\n";g+='                            \x3c/ul\x3e\n                        \x3c/div\x3e\n                        \x3cdiv id\x3d"attachWarrantyButtonWrapper" class\x3d"a-section a-box-inner a-color-alternate-background"\x3e\n                            \x3cdiv id\x3d"attachWarrantyButtonInnerWrapper" class\x3d"a-section a-box-inner"\x3e\n                                \x3cdiv id\x3d"attach_add_accessory_alert_warranty" class\x3d"a-box a-alert-inline a-alert-inline-success aok-hidden attach_add_accessory_alert"\x3e\n                                    \x3cdiv class\x3d"a-box-inner a-alert-container"\x3e\n                                        \x3ci class\x3d"a-icon a-icon-alert"\x3e\x3c/i\x3e\n                                        \x3cdiv class\x3d"a-alert-content"\x3e\n                                            \x3cspan class\x3d"a-size-base a-color-success"\x3e'+
n+'\x3c/span\x3e\n                                        \x3c/div\x3e\n                                    \x3c/div\x3e\n                                \x3c/div\x3e\n                                \x3cdiv id\x3d"attach_add_accessory_error_warranty" class\x3d"a-box a-alert-inline a-alert-inline-error aok-hidden attach_add_accessory_alert" aria-live\x3d"assertive" role\x3d"alert"\x3e\n                                    \x3cdiv class\x3d"a-box-inner a-alert-container"\x3e\n                                        \x3ci class\x3d"a-icon a-icon-alert"\x3e\x3c/i\x3e\n                                        \x3cdiv class\x3d"a-alert-content"\x3e\n                                            \x3cspan class\x3d"a-size-base"\x3e\n                                                '+
p+'\x3cbr\x3e\n                                            \x3c/span\x3e\n                                            \x3ca class\x3d"a-link-normal attach-add-to-cart-retry" href\x3d"#"\x3e\n                                                '+r+'\n                                            \x3c/a\x3e\n                                        \x3c/div\x3e\n                                    \x3c/div\x3e\n                                \x3c/div\x3e\n                                \x3cspan id\x3d"attach_add_accessory_spinner_warranty" class\x3d"a-spinner a-spinner-small attach-spinner aok-hidden"\x3e\x3c/span\x3e\n                                \x3cdiv class\x3d"a-section attach-warranty-button-row"\x3e\n                                    \x3cdiv class\x3d"a-button-stack"\x3e\n                                        \x3cspan id\x3d"attachSiAddCoverage" class\x3d"a-button a-button-primary attach-si-add-client"\x3e\n                                            \x3cspan class\x3d"a-button-inner"\x3e\n                                                \x3cbutton id\x3d"attachSiAddCoverage-announce" data-asin\x3d"'+
c.asin+'" data-offering-id\x3d"'+c.oid+'" class\x3d"a-button-text" type\x3d"button"\x3e\n                                                    '+q+'\n                                                \x3c/button\x3e\n                                            \x3c/span\x3e\n                                        \x3c/span\x3e\n                                        \x3cspan id\x3d"attachSiNoCoverage" class\x3d"a-button"\x3e\n                                            \x3cspan class\x3d"a-button-inner"\x3e\n                                                \x3cbutton id\x3d"attachSiNoCoverage-announce" class\x3d"a-button-text" type\x3d"button"\x3e\n                                                    '+
x+'\n                                                \x3c/button\x3e\n                                            \x3c/span\x3e\n                                        \x3c/span\x3e\n                                    \x3c/div\x3e\n                                \x3c/div\x3e\n                            \x3c/div\x3e\n                        \x3c/div\x3e\n                    \x3c/div\x3e\n                \x3c/div\x3e\n            \x3c/div\x3e\n            \x3ca class\x3d"a-link-normal" target\x3d"_blank" rel\x3d"noopener" href\x3d"/dp/'+
c.asin+"/ref\x3d"+e+'"\x3e\n                '+C+"\n            \x3c/a\x3e\n        \x3c/div\x3e\n    \x3c/div\x3e\n";b.$container.append(g)};d.onAttachAddBaseToCart=function(a){a.always(d.clearWarrantyFromATCForm)};d.setup=function(c){a.$(n.PANE).hide();var f=a.$(n.PANE_IMAGE).attr("data-image-url");a.$(n.PANE_IMAGE).attr("src",f);a.$(n.PANE_ADD_BUTTON).click(function(){var f=a.$(this).find("button");if(g.servicesInterstitialDeprecated()||g.isWarrantyServerSideDSSEnabled())f=a.$(this).find("[data-asin]");
var e=f.attr("data-asin"),f=f.attr("data-offering-id");d.appendWarrantyToATCForm(e,f);h.logWarrantyAddToCart(d.getWarrantyLoggingPayload());g.servicesInterstitialDeprecated()&&!b.hasAccessories()?(c.next(),c.fail(b.FailureModes.TRANSITION_TO_HUC,"ATTACH_DSS_WARRANTY_ADD_NO_ACCESSORIES")):(b.submitATCForm(),c.next())});a.$(n.PANE_NO_BUTTON).click(function(){g.servicesInterstitialDeprecated()&&!b.hasAccessories()?(c.next(),c.fail(b.FailureModes.TRANSITION_TO_HUC,"ATTACH_DSS_WARRANTY_NO_THANKS_NO_ACCESSORIES")):
(b.submitATCForm(),c.next())});a.off("attach:add-base-to-cart",d.onAttachAddBaseToCart);a.on("attach:add-base-to-cart",d.onAttachAddBaseToCart)};d.show=function(){a.$(n.PANE).fadeIn(400,d.setFocus);h.logWarrantyImpression(d.getWarrantyLoggingPayload())};d.hide=function(){a.$(n.PANE).fadeOut()};d.setFocus=function(){a.$(n.PANE_WARRANTY_TITLE).get(0).focus()};return d});"use strict";q.when("A","attach-common","attach-logging").register("attach-desktop-tradein-pane",function(a,b,h){var f=a.$,g={name:"tradein"},
p=!1,c,d=g.Endpoints={RENDER:"/tradein/hzw/getSidesheetPaneForDSS?deviceType\x3dweb"},k=g.Selectors={PANE:"#attach-tradein-pane",PANE_TRADEIN_BUTTON:"#dssTradeInButton",PANE_NO_BUTTON:"#tradeinNoThanksButton",PANE_TRADEIN_TITLE:"#tradein-displayTitle"},n=g.Constants={HTTP_UNAUTHORIZED_CODE:401};g.load=function(a){var b=f.Deferred();f.ajax(d.RENDER,{method:"get",success:function(c){a.$container.append(c);b.resolve()},timeout:1E3,error:function(a,c,g){a.status!==n.HTTP_UNAUTHORIZED_CODE&&("timeout"===
c?h.logCount(h.CSM_METRICS.TRADEIN_LOAD_TIMEOUT):h.logCount(h.CSM_METRICS.TRADEIN_LOAD_FAILURE));p=!0;b.resolve()}});return b.promise()};g.setup=function(a){c=a;f(k.PANE).hide();f(k.PANE_NO_BUTTON).click(function(){a.next()});f(k.PANE_TRADEIN_BUTTON).click(function(){a.next()})};g.show=function(){p?c.next():f(k.PANE).fadeIn(400,g.setFocus)};g.hide=function(){f(k.PANE).fadeOut()};g.setFocus=function(){f(k.PANE_TRADEIN_TITLE).get(0).focus()};return g});"use strict";q.when("A","attach-common","attach-weblabs",
"attach-maple","attach-logging","attach-variant-registration").register("attach-desktop-accessories-pane",function(a,b,h,f,g,p){var c={name:"accessories"},d=!0,k=!1,n,l=!1,w=!1,t=c.Endpoints={RENDER:"/gp/product/features/aloha-ppd/udp-ajax-handler/attach-render-desktop.html",GET_CART_DESCRIPTION:"/gp/product/features/aloha-ppd/udp-ajax-handler/attach-get-cart-description.html",ADD_ACCESSORY_TO_CART:"/gp/product/features/aloha-ppd/udp-ajax-handler/attach-add-to-cart.html",PROCEED_TO_CHECKOUT:"/gp/cart/desktop/go-to-checkout.html?proceedToCheckout\x3dProceed"},
e=c.Selectors={BASE_ASIN:"#attach-baseAsin",QUANTITY:"#quantity",ACCESSORY_ASIN_LIST:"#attach-asin-list",MARKETPLACE_ID:"#attach-marketplaceId",LANGUAGE_OF_PREFRENCE:"#attach-languageOfPreference",PANE:"#attach-accessory-pane",PANE_CLOSE_BUTTON:"#attach-close_sideSheet-link",PANE_CART_BASE_ALERT_IMAGE_AREA:"#attach-added-to-cart-alert-and-image-area",PANE_CART_BASE_ALERT:"#attachDisplayAddBaseAlert",PANE_CART_BASE_SUCCESS_ALERT:"#attachAddBaseItemSuccessAlert",PANE_CART_BASE_ERROR_ALERT:"#attachAddBaseItemErrorAlert",
PANE_CART_BASE_INITIAL_IMAGE:"#attach-sheet-view-base-product-image",PANE_CART_BASE_HUC_IMAGE:".huc-image-wrapper",PANE_CART_BLOCK:".attach-primary-atc-confirm-box",PANE_CART_BLOCK_INNER:"#attach-added-to-cart-message",PANE_CART_BLOCK_SUBTOTAL_LABEL:"#attach-accessory-cart-total-string",PANE_CART_BLOCK_SUBTOTAL_PRICE:"#attach-accessory-cart-subtotal",PANE_CART_BLOCK_CORE_FREE_SHIPPING_MESSAGE:"#attach-core-free-shipping-message",PANE_CART_BLOCK_PROCEED_TO_CHECKOUT:"#attach-accessory-proceed-to-checkout-text",
PANE_CART_SPINNER:"#attach-add-to-cart-message-spinner",PANE_VIEW_CART_BUTTON:"#attach-sidesheet-view-cart-button",PANE_CHECKOUT_BUTTON:"#attach-sidesheet-checkout-button",PANE_HUC_MESSAGE:".attach-add-to-cart-message-card",PANE_ACCESORIES_CARD:"#attach-accessories",PANE_CATEGORIZED_ACCESSORIES_TILES_CARD:"#attach-categorized-accessories-tiles",PANE_ACCESSORY_RETRY_BUTTON:".attach-add-to-cart-retry",PANE_ACCESSORY_ADD_DECLARATIVES:'.a-declarative[data-action\x3d"attach-accessory-add"]',PANE_ACCESSORY_IMAGE:".attach-accessory-image",
PANE_ACCESSORY_ASIN:".attach-accessory-asin",PANE_ACCESSORY_ADD_BUTTON_PREFIX:"#attach_add_accessory_button_",PANE_ACCESSORY_ADD_SPINNER_PREFIX:"#attach_add_accessory_spinner_",PANE_ACCESSORY_ADD_SUCCESS_PREFIX:"#attach_add_accessory_alert_",PANE_ACCESSORY_ADD_ERROR_PREFIX:"#attach_add_accessory_error_",PANE_ACCESSORY_FIRST_ASIN:"#attach_accessory_dp_1",PANE_CATEGORIZED_ACCESSORIES_CARD:"#attach-categorized-accessories",PANE_ACCESSORY_TITLE:".attach-accessory-title",PANE_ACCESSORY_TILE_ITEM:".attach-accessory-tile",
PANE_ACCESSORY_TILE_ITEM_PREFIX:"#attach-accessory-tile-",PANE_ACCESSORY_CAROUSEL:"#attach-accessories .a-carousel-container",PANE_ACCESSORY_CARD:"#attach-accessories.card-expandable",PANE_ACCESSORY_CARD_SEE_MORE:".card-toggle-see-more",PANE_ACCESSORY_CARD_SEE_LESS:".card-toggle-see-less",PANE_ACCESSORY_CARD_PEEK_CONTENT:".card-peek-content",PANE_ACCESSORY_CARD_EXPAND_CONTENT:".card-expand-content",PANE_MAPLE_SLOT:"#maple-dss-slot",PANE__DATA_CATEGORY_VIEW:"categoryView",PANE__DATA_ASIN_INDEX:"asinindex",
PANE_ACCESSORY_COUPON:".attach-accessory-coupon",PANE_ACCESSORY_COUPON_PREFIX:"#attach-accessory-coupon-",PANE_ACCESSORY_COUPON_UNCLIPPED_CLASS:".attach-coupon-unclipped",PANE_ACCESSORY_COUPON_CLIPPED_CLASS:".attach-coupon-clipped",PANE_ACCESSORY_COUPON_ERROR_CLASS:".attach-coupon-error",PANE_ACCESSORY_COUPON_BADGE_CLASS:".attach-coupon-short-badge",PANE_ACCESSORY_COUPON_BADGE_UNCLIPPED_CLASS:".attach-coupon-badge-unclipped",PANE_ACCESSORY_COUPON_BADGE_CLIPPED_CLASS:".attach-coupon-badge-clipped",
PANE_ACCESSORY_LIGHTNING_DEAL:".attach-accessory-lightning-deal",PANE_ACCESSORY_LIGHTNING_DEAL_PREFIX:"#attach-accessory-lightning-deal-",PANE_ACCESSORY_LIGHTNING_DEAL_JOIN_WAITLIST_PREFIX:"#attach-accessory-deal-on-waitlist-",PANE_ACCESSORY_CSRF_TOKEN:"#attach-accessory-deal-csrf-token",DEBUG_IS_DEBUG:"#attach-debug-isDebug",DEBUG_QUERY_STRING:"#attach-debug-queryString"},v=c.AccessoryAddStatus={INITIAL:0,ADDING:1,SUCCESS:2,ERROR:3};c.setShouldIncludeMaple=function(a){k=a};c.load=function(c){q.now("attach-external-atc-interceptor").execute(function(a){n=
a});a.trigger("LOADED_ACCESSORIES_PANE_SUCCESSFULLY");var u=a.$.Deferred(),d,l;q.now("dp-util-cookie").execute(function(c){c&&c("session-id")!==a.$("#attach-sessionId").val()&&b.rejectPromise(u,b.FailureModes.TRANSITION_TO_HUC,{count:"ATTACH_DSS_INVALID_SESSION_ID"})});d={attachAccessoryAsinList:a.$(e.ACCESSORY_ASIN_LIST).val(),marketplaceId:a.$(e.MARKETPLACE_ID).val(),asin:a.$(e.BASE_ASIN).val(),deviceType:"desktop",attachWeblabsToTrigger:[]};h.isAttachDebugParametersEnabled()&&(d.isDebug=a.$(e.DEBUG_IS_DEBUG).val(),
d.queryString=a.$(e.DEBUG_QUERY_STRING).val());d=a.$.param(d,!0);d=a.$.post(t.RENDER,d);k&&(b.isCurrencyOfPreferenceApplied()&&f.suppressMathBox(),l=f.loadBannerHTML());a.$.when(d,l).done(function(d,f){var h=a.$(d[0].trim()),A=!h.is(e.PANE),h=0===h.find(e.PANE_ACCESSORY_ASIN).length;A||h?b.rejectPromise(u,b.FailureModes.TRANSITION_TO_HUC,{count:["ATTACH_DSS_RENDER_FAILURE","ATTACH_DSS_RENDER_FAILURE_INVALID_HTML"]}):(c.$container.append(a.$(d[0]).get(0)),f&&0<f.trim().length&&(f=a.$(f),d=f.not("script"),
f=f.filter("script"),b.elementExists(e.PANE_CATEGORIZED_ACCESSORIES_TILES_CARD)?d.insertAfter(e.PANE_CATEGORIZED_ACCESSORIES_TILES_CARD):d.insertAfter(e.PANE_ACCESORIES_CARD),d.wrap('\x3cdiv id\x3d"maple-dss-slot"\x3e\x3cdiv id\x3d"maple-dss-card" class\x3d"a-section attach-sidesheet-card"\x3e\x3c/div\x3e\x3c/div\x3e'),f.each(function(){a.$.globalEval(this.innerHTML)}),g.logCount("ATTACH_DSS_MAPLE_RENDERED")),u.resolve())}).fail(function(){b.rejectPromise(u,b.FailureModes.TRANSITION_TO_HUC,{count:"ATTACH_DSS_RENDER_FAILURE"})});
return u.promise()};c.onAttachAddBaseToCart=function(a){d=!1;a.pipe(c.handleAddBaseAndGetCartDescription).pipe(b.pipeJSON).pipe(c.handleCartDescription).fail(function(a,m){c.sheet.fail(a||b.FailureModes.ERROR_500,m)})};c.runOnceSetup=function(){l||(l=!0,a.declarative("attach-accessory-add","click",function(b){var u=b.$currentTarget,d=b.data,f=d.a,h=d.oid,d=d.isLightningDeal;g.logCount(g.CSM_METRICS.ATTACH_UPSELL_ATC_CLICK);g.beginLatencyCapture(g.CSM_METRICS.ATTACH_UPSELL_ATC_LATENCY);b=!0===a.$(e.PANE_CATEGORIZED_ACCESSORIES_CARD).data(e.PANE__DATA_CATEGORY_VIEW)?
a.$(b.$target).data(e.PANE__DATA_ASIN_INDEX):a.$(e.PANE_ACCESSORY_ADD_DECLARATIVES).index(u);d?c.addAccessoryToCartWithLightningDeal(b):c.addAccessoryToCart(f,h,b)}))};c.setup=function(b){c.runOnceSetup();a.$(e.PANE).hide();c.sheet=b;a.off("attach:add-base-to-cart",c.onAttachAddBaseToCart);a.on("attach:add-base-to-cart",c.onAttachAddBaseToCart);a.$(e.PANE_VIEW_CART_BUTTON).click(c.viewCart);a.$(e.PANE_CHECKOUT_BUTTON).click(c.proceedToCheckout);a.$(e.PANE_ACCESSORY_RETRY_BUTTON).click(function(){var b=
a.$(this).attr("data-asin"),e=a.$(this).attr("data-oid"),m=a.$(this).attr("data-idx");c.addAccessoryToCart(b,e,m)});a.$(e.PANE_CLOSE_BUTTON).appendTo(e.PANE_CART_BLOCK).click(b.next);a.$(e.PANE_ACCESSORY_IMAGE).each(function(){a.$(this).attr("src",a.$(this).attr("data-image-url"))});h.isShowAccessoryCouponsDssEnabled()&&c.initializeCoupons();a.$(e.PANE_ACCESSORY_LIGHTNING_DEAL).each(function(){var b=a.$(this).data().idx;c.updateLightningDealTimer(b);c.initializeLightningDealStatusRefresher(b)})};
c.show=function(){d&&b.submitATCForm();a.$(e.PANE).css({opacity:0}).show().animate({opacity:1},500,"linear",c.setFocus);var m=a.$(e.PANE_CART_BLOCK_INNER);m.find("div").addClass("aok-hidden");m.append(a.$(e.PANE_CART_SPINNER).removeClass("aok-hidden"));c.initializeAccessoriesDisplay();q.now("attach-categorized-cards").execute(function(a){a!==x&&a.initializeCategorizedCards()})};c.hide=function(){a.$(e.PANE).hide();a.$(e.PANE_CART_SPINNER).addClass("aok-hidden");a.$(e.PANE_HUC_MESSAGE).remove();a.$(e.PANE_ACCESSORY_ASIN).each(function(b,
u){(u=a.$(u).data(e.PANE__DATA_ASIN_INDEX))&&(b=u);c.updateAccessoryStatus(b,v.INITIAL)});a.trigger("RESET_SECONDARY_SIDE_SHEET_MODULE");n&&n.unloadAttachModule();a.trigger("aloha:detailPage:reappear");d=!0};c.setFocus=function(){a.$(e.PANE_ACCESSORY_FIRST_ASIN).length&&a.$(e.PANE_ACCESSORY_FIRST_ASIN).get(0).focus()};c.viewCart=function(){g.logCount(g.CSM_METRICS.ATTACH_CART_CLICK);document.location=""};c.proceedToCheckout=function(){g.logCount(g.CSM_METRICS.ATTACH_CHECKOUT_CLICK);document.location=
w?t.PROCEED_TO_CHECKOUT+"\x26cartInitiateId\x3d"+w+"\x26ref_\x3ddp_atch_dss_proceed":t.PROCEED_TO_CHECKOUT+"\x26ref_\x3ddp_atch_dss_proceed"};c.updateNavCartDisplayQuantity=function(b){var c=Number(b);b=isNaN(c)?"":100>c?b:"99+";a.$("#nav-cart-count").toggleClass("nav-cart-0",0===c).toggleClass("nav-cart-1",1<=c&&10>c).toggleClass("nav-cart-10",10<=c&&20>c).toggleClass("nav-cart-20",20<=c&&100>c).toggleClass("nav-cart-100",100<=c).text(b)};c.handleAddBaseAndGetCartDescription=function(m){g.logCount(g.CSM_METRICS.ATTACH_BASE_ATC_SUCCESS);
m=a.$(m);c.renderHUCFeedback(m);c.renderBaseAddStatusIcon(m);if(n)try{var d=a.$(e.PANE_ACCESSORY_ASIN).map(function(){return this.value}).get();n.loadAttachModule(d)}catch(f){q.logError(f,"Could not update ABB/DSS external interceptor: ","ERROR","attach-desktop-accessories-pane")}d={marketplaceId:a.$(e.MARKETPLACE_ID).val(),asin:a.$(e.BASE_ASIN).val(),languageOfPreference:a.$(e.LANGUAGE_OF_PREFRENCE).val(),customerId:a.$("#attach-customerId").val(),sessionId:a.$("#attach-sessionId").val()};return a.$.post(t.GET_CART_DESCRIPTION,
d).pipe(null,function(a,c,e){q.logError(Error(c),"AJAX cart description call failed: ","ERROR","attach-desktop-accessories-pane");return b.reject(null,{count:g.CSM_METRICS.ATTACH_GET_CART_DESCRIPTION_FAILURE})})};c.handleCartDescription=function(m){try{if(isNaN(parseInt(m.totalPrice))||isNaN(parseInt(m.itemQuantity))||!a.$.isArray(m.includedAsins)||0===m.formattedTotalPrice.trim().length||0===m.cartSubtotalString.trim().length||0===m.itemQuantityString.trim().length)throw Error("Received invalid cart description");
c.updateNavCartDisplayQuantity(m.itemQuantity);a.$(e.PANE_CART_BLOCK_SUBTOTAL_LABEL).html(m.cartSubtotalString);a.$(e.PANE_CART_BLOCK_SUBTOTAL_PRICE).html(m.formattedTotalPrice);a.$(e.PANE_CART_BLOCK_PROCEED_TO_CHECKOUT).html(m.itemQuantityString);a.$("#attach-customerId").val()&&q.when("attach-preinitiate-checkout").execute(function(a){w=a.getCartInitiateId();a.preinitiateCheckout(w)});m.coreFreeShippingMessage&&a.$(e.PANE_CART_BLOCK_CORE_FREE_SHIPPING_MESSAGE).html(m.coreFreeShippingMessage);k&&
f.updateMathBox(Number(m.totalPrice));a.$(e.PANE_CART_BLOCK_INNER).find("div").removeClass("aok-hidden");a.$(e.PANE_CART_SPINNER).addClass("aok-hidden");setTimeout(c.revealHUCFeedback,200);q.when("EWC").execute(function(a){a.refresh()});g.logCount(g.CSM_METRICS.ATTACH_GET_CART_DESCRIPTION_SUCCESS);return m}catch(d){return q.logError(d,"Could not process the cart description: ","ERROR","attach-desktop-accessories-pane"),b.reject(null,{count:"ATTACH_DSS_HANDLE_CART_DESCRIPTION_FAILURE"})}};c.updateAccessoryStatus=
function(b,c){a.$(e.PANE_ACCESSORY_ADD_BUTTON_PREFIX+b).toggleClass("aok-hidden",c!==v.INITIAL);a.$(e.PANE_ACCESSORY_ADD_SPINNER_PREFIX+b).toggleClass("aok-hidden",c!==v.ADDING);a.$(e.PANE_ACCESSORY_ADD_SUCCESS_PREFIX+b).toggleClass("aok-hidden",c!==v.SUCCESS);a.$(e.PANE_ACCESSORY_ADD_ERROR_PREFIX+b).toggleClass("aok-hidden",c!==v.ERROR);a.$("#tile-add-accessory-badge-"+b).toggleClass("aok-hidden",c!==v.SUCCESS);a.$("#attach-accessory-tile-"+b).toggleClass("in-cart",c===v.SUCCESS)};c.addAccessoryToCart=
function(m,d,f){d={marketplaceId:a.$(e.MARKETPLACE_ID).val(),asin:a.$(e.BASE_ASIN).val(),customerId:a.$("#attach-customerId").val(),sessionId:a.$("#attach-sessionId").val(),accessoryItemAsin:m,accessoryItemOfferingId:d,languageOfPreference:a.$(e.LANGUAGE_OF_PREFRENCE).val(),accessoryItemQuantity:a.$(e.QUANTITY).val(),accessoryItemPrice:a.$("#attach-accessory-base-price-"+f).val(),accessoryMerchantId:a.$("#attach-accessory-merchantId-"+f).val(),accessoryProductGroupId:a.$("#attach-accessory-product-category-code-"+
f).val()};h.isAttachDynamicBundlingEnabled()&&(d.keyValuePairs=JSON.stringify({itemAssoc:b.uniqueId,itemAssocType:b.itemAssocTypeValue,itemAssocRenderType:"renderAll"}));c.updateAccessoryStatus(f,v.ADDING);a.$.post(t.ADD_ACCESSORY_TO_CART,d).pipe(b.pipeJSON).pipe(c.handleCartDescription).pipe(function(e){if(-1===a.$.inArray(m,e.includedAsins))return b.reject(null,{count:"ATTACH_DSS_ADD_ACCESSORY_NOT_IN_CART"});c.updateAccessoryStatus(f,v.SUCCESS);g.logAccessoryAddToCart(c.getAccessoryLoggingData(f));
g.logCount(g.CSM_METRICS.ATTACH_UPSELL_ATC_SUCCESS);a.trigger("UPSELL_ASIN_ADDED_TO_CART",f);q.when("EWC").execute(function(a){a.refresh()})}).fail(function(){g.logCount(g.CSM_METRICS.ATTACH_UPSELL_ATC_FAILURE);c.updateAccessoryStatus(f,v.ERROR);a.trigger("UPSELL_ASIN_NOT_ADDED_TO_CART",f)})};c.addAccessoryToCartWithLightningDeal=function(m){c.updateAccessoryStatus(m,v.ADDING);var d=a.$("#attach-accessory-claim-deal-url-"+m).val(),f=a.$("#attach-accessory-claim-deal-params-"+m).val();if(d&&f){f=JSON.parse(b.unescapeJson(f));
f.clientId="attach";var h=a.$(e.PANE_ACCESSORY_CSRF_TOKEN).val();a.$.ajax({type:"POST",url:d,data:f,headers:{"X-CSRFToken":h}}).pipe(function(d){var f=d.dealItemStatus&&d.dealItemStatus.customerState;if("1"!==d.isClaimed&&"INWAITLIST"!==f)return b.reject(null,{count:"ATTACH_DSS_ADD_ACCESSORY_NOT_IN_CART"});"INWAITLIST"===f?a.$(e.PANE_ACCESSORY_ADD_SPINNER_PREFIX+m).addClass("aok-hidden"):c.updateAccessoryStatus(m,v.SUCCESS);g.logAccessoryAddToCart(c.getAccessoryLoggingData(m));g.logCount(g.CSM_METRICS.ATTACH_UPSELL_ATC_SUCCESS);
d=d.dealItemStatus&&d.dealItemStatus.msToCustomerStateExpiry;c.handleLightningDealAddToCart(m,d?d:900,f);a.trigger("UPSELL_ASIN_ADDED_TO_CART",m);q.when("EWC").execute(function(a){a.refresh()});f={marketplaceId:a.$(e.MARKETPLACE_ID).val(),asin:a.$(e.BASE_ASIN).val(),customerId:a.$("#attach-customerId").val(),sessionId:a.$("#attach-sessionId").val(),languageOfPreference:a.$(e.LANGUAGE_OF_PREFRENCE).val(),isLightningDeal:!0};a.$.post(t.GET_CART_DESCRIPTION,f).pipe(b.pipeJSON).pipe(c.handleCartDescription)}).fail(function(){g.logCount(g.CSM_METRICS.ATTACH_UPSELL_ATC_FAILURE);
c.updateAccessoryStatus(m,v.ERROR);a.trigger("UPSELL_ASIN_NOT_ADDED_TO_CART",m)})}};c.revealHUCFeedback=function(){var b=a.$(e.PANE_HUC_MESSAGE);if(b.hasClass("aok-hidden")){b.css({position:"absolute",top:0}).removeClass("aok-hidden");var c=b.children().height();0<c&&b.css({marginTop:-1*(c+4)+"px",position:"initial"}).animate({marginTop:"14px"},800)}};c.renderHUCFeedback=function(c){var d=c.find("#hlb-ship-message");c=a.$().add(c.find("#huc-v2-message-group")).add(c.find("#hlb-imb"));h.isCoreFreeShippingMessageEnabled()&&
b.elementExists(d)&&a.$(e.PANE_CART_BLOCK_CORE_FREE_SHIPPING_MESSAGE).html(d.html());0<c.length&&(d=a.$("\x3cdiv class\x3d'attach-sidesheet-card attach-add-to-cart-message-card aok-hidden'\x3e\x3c/div\x3e"),d.append(c),d.insertAfter(e.PANE_CART_BLOCK),d.find(".a-declarative a").unwrap(),d.find(".a-declarative span").removeClass("a-color-link huc-cursor-pointer").unwrap(),d.find(".sc-action-quantity").hide(),(d=c.find(".a-alert-heading").text())&&g.logDSSWarningMessage(d))};c.renderBaseAddStatusIcon=
function(c){var d;b.elementExists(c.find("#huc-v2-order-row-confirm-text"))?d=c.find("#huc-v2-order-row-confirm-text").hasClass("a-color-error"):b.elementExists(c.find("#hl-confirm-text"))&&(d=c.find("#hl-confirm-text").hasClass("a-alert-warning"));d=(d?a.$(e.PANE_CART_BASE_ERROR_ALERT):a.$(e.PANE_CART_BASE_SUCCESS_ALERT)).clone().prop("id","attachDisplayAddBaseAlert");a.$(e.PANE_CART_BASE_ALERT).remove();a.$(e.PANE_CART_BASE_ALERT_IMAGE_AREA).prepend(d);d=c.find(".huc-v2-order-row-image").clone();
b.elementExists(d)||(d=c.find(".hlb-product-image").clone());if(1<d.length){d=d.first();var f=a.$('input[name^\x3d"asin"].attach-warranty-input');0===f.length&&(f=a.$('.abbListItem.mbb__r input[name^\x3d"asin"]'));if(b.elementExists(f))for(var g=0;g<f.length;g++){var h=f[g].value,t=c.find("#huc-v2-order-row-item-"+h);if(t.length){c=b.elementExists(t)?t.find(".huc-v2-order-row-image"):c.find(".hlb-item-link.hlb-asin-"+h+" \x3e img");d=d.add(c.clone());break}}}a.$(e.PANE_CART_BASE_HUC_IMAGE).remove();
a.$(e.PANE_CART_BASE_INITIAL_IMAGE).hide().parent().append(d);d.wrap('\x3cdiv class\x3d"huc-image-wrapper"\x3e\x3c/div\x3e')};c.getAccessoryLoggingData=function(b){return{asin:a.$("#attach-accessory-asin-"+(parseInt(b)+1)).val(),index:b,priceFormatted:a.$("#attach-accessory-price-"+b+" \x3e .a-offscreen").text(),priceDecimal:parseFloat(a.$("#attach-accessory-base-price-"+b).val())||null,currencySymbol:a.$("#attach-accessory-base-currency-symbol-"+b).val()||null,couponDecimal:parseFloat(a.$("#attach-accessory-coupon-benefit-amount-"+
b).val())||null,couponType:a.$("#attach-accessory-coupon-benefit-type-"+b).val()||null,dealType:a.$("#attach-accessory-deal-type-"+b).val()||null,dealPercentSavings:parseInt(a.$("#attach-accessory-deal-percent-savings-"+b).val())||null,dealDollarAmount:a.$("#attach-accessory-deal-dollar-savings-"+b).val()||null,categoryIndex:a.$("#attach-accessory-category-index-"+b).val()||null,categoryTitle:a.$("#attach-accessory-category-title-"+b).val()||null,asinIndexWithinCategory:a.$("#attach-accessory-asin-category-index-"+
b).val()||null}};c.createAccessoryImpressions=function(){var b=[];a.$(e.PANE_ACCESSORY_ASIN).parent().each(function(d,e){e=a.$(e);if(e.is(":hidden")||"hidden"===e.css("visibility")||e.prop("data-accessory-seen"))return null;e.prop("data-accessory-seen",!0);b.push(c.getAccessoryLoggingData(d))});return b};c.resetAccessoryImpressions=function(){a.$(e.PANE_ACCESSORY_ASIN).parent().removeProp("data-accessory-seen")};c.initializeAccessoriesDisplay=function(){c.initializeAccessoriesCards();c.initializeAccessoriesTiles();
c.initializeCategorizedAccessoriesCards();a.animationFrameDelay(function(){c.resetAccessoryImpressions();g.logAccessoryImpressions(c.createAccessoryImpressions())})};c.initializeAccessoriesCards=function(){a.$(e.PANE_ACCESSORY_CARD).each(function(){var b=a.$(this),d=b.find(e.PANE_ACCESSORY_CARD_SEE_MORE),f=b.find(e.PANE_ACCESSORY_CARD_SEE_LESS),h=b.find(e.PANE_ACCESSORY_CARD_EXPAND_CONTENT);d.show();f.hide();h.hide();b.removeProp("data-card-expanded");b.removeProp("data-card-previously-expanded");
d.click(function(){d.hide();f.show();h.slideDown(400);b.prop("data-card-expanded",!0);b.parent().animate({scrollTop:b.get(0).offsetTop-30},400);b.prop("data-card-previously-expanded")||(b.prop("data-card-previously-expanded",!0),g.logAccessoryImpressions(c.createAccessoryImpressions()));g.logCount(g.CSM_METRICS.ATTACH_SHOW_MORE)});f.click(function(){f.hide();d.show();h.slideUp(400);b.prop("data-card-expanded",!1);g.logCount(g.CSM_METRICS.ATTACH_SHOW_LESS)})})};c.initializeAccessoriesTiles=function(){q.when("a-truncate").execute(function(b){a.$(e.PANE_ACCESSORY_TITLE).each(function(){b.get(this).update()});
a.$(e.PANE_ACCESSORY_TILE_ITEM).hover(function(){var c=a.$(this).find(e.PANE_ACCESSORY_TITLE);c.length&&b.get(c.get()).update()})})};c.initializeCategorizedAccessoriesCards=function(){b.elementExists(e.PANE_CATEGORIZED_ACCESSORIES_TILES_CARD)&&(a.on("a:expander:attach_see_more_expander:toggle:expand",function(){g.logAccessoryImpressions(c.createAccessoryImpressions())}),a.on("a:expander:attach_category_expander:toggle:expand",function(){g.logAccessoryImpressions(c.createAccessoryImpressions())}))};
c.initializeAccessoriesCarousel=function(){q.when("a-truncate","a-carousel-framework").execute(function(b,d){if(a.$(e.PANE_ACCESSORY_CAROUSEL).length){a.$(e.PANE_ACCESSORY_TITLE).each(function(){b.get(this).update()});d.createAll();var f=d.getCarousel(a.$(e.PANE_ACCESSORY_CAROUSEL));f&&(f.attachViewedPages=[1],f.gotoPage(1,{animationDuration:1}),a.on("a:carousel:attach-carousel:change:animating",function(a){a.newValue||(a=f.getAttr("pageNumber"),-1===f.attachViewedPages.indexOf(a)&&(f.attachViewedPages.push(a),
g.logAccessoryImpressions(c.createAccessoryImpressions())))}))}})};c.initializeCoupons=function(){var b;a.$(e.PANE_ACCESSORY_COUPON_BADGE_CLASS).each(function(){var b=a.$(this).text().replace(/\s+/g," ");a.$(this).attr("title",b)});a.on("a:popover:positionUpdated:attach-coupon-popover",c.handleCouponPopoverPositionUpdated);a.on("a:popover:beforeShow:attach-coupon-popover",function(d){d.popover.$trigger.parents(e.PANE_ACCESSORY_TILE_ITEM).addClass("hover");b=c.createCouponPopoverPositionHandler(d);
a.$(r).bind("scroll",b);a.$(e.PANE+" \x3e .a-scroller").bind("scroll",b)});a.on("a:popover:afterHide:attach-coupon-popover",function(c){c.popover.$trigger.parents(e.PANE_ACCESSORY_TILE_ITEM).removeClass("hover");a.$(r).unbind("scroll",b);a.$(e.PANE+" \x3e .a-scroller").unbind("scroll",b)});a.declarative("attach-coupon-checkbox","change",function(b){var d=b.data,f=b.$currentTarget.parents(e.PANE_ACCESSORY_COUPON);d&&d.ajaxClaimUrl?a.$.get(d.ajaxClaimUrl).done(function(){c.handleCouponClaimSuccess(f,
d.accessoryItemIndex)}).fail(function(a,b,d){q.logError(Error(d),"Could not clip coupon: ","ERROR","attach-desktop-accessories-pane");c.handleCouponClaimError(f)}):(q.logError(Error("Coupon claim URL not available"),"Could not clip coupon: ","ERROR","attach-desktop-accessories-pane"),c.handleCouponClaimError(f))})};c.handleCouponPopoverPositionUpdated=function(a){a.popover.$container.css("z-index",6E3)};c.createCouponPopoverPositionHandler=function(a){return function(){a.popover.updatePosition()}};
c.handleCouponClaimSuccess=function(a,b){g.logPromotionClaimed(c.getAccessoryLoggingData(b-1));a.find(e.PANE_ACCESSORY_COUPON_UNCLIPPED_CLASS).addClass("aok-hidden");a.find(e.PANE_ACCESSORY_COUPON_CLIPPED_CLASS).removeClass("aok-hidden");a=a.parents(e.PANE_ACCESSORY_TILE_ITEM);a.length&&(a.find(e.PANE_ACCESSORY_COUPON_BADGE_UNCLIPPED_CLASS).addClass("aok-hidden"),a.find(e.PANE_ACCESSORY_COUPON_BADGE_CLIPPED_CLASS).removeClass("aok-hidden"))};c.handleCouponClaimError=function(a){a.find(e.PANE_ACCESSORY_COUPON_UNCLIPPED_CLASS).addClass("aok-hidden");
a.find(e.PANE_ACCESSORY_COUPON_CLIPPED_CLASS).addClass("aok-hidden");a.find(e.PANE_ACCESSORY_COUPON_ERROR_CLASS).removeClass("aok-hidden")};c.updateLightningDealTimer=function(b){var d=a.$("#attach-accessory-deal-timer-"+b).val()-1;a.$("#attach-accessory-deal-timer-"+b).val(d);var e=c.convertTimeLeftToString(d);a.$("#attach-accessory-deal-timer-string-"+b).text(e);0===d?c.handleDealHasEnded(b):setTimeout(c.updateLightningDealTimer,1E3,b)};c.convertTimeLeftToString=function(a){var b=Math.floor(a/3600),
d=Math.floor(a/60)%60;a%=60;return 0>=b?c.appendZeroIfSingleDigit(d)+":"+c.appendZeroIfSingleDigit(a):b+":"+c.appendZeroIfSingleDigit(d)+":"+c.appendZeroIfSingleDigit(a)};c.appendZeroIfSingleDigit=function(a){return(10>a?"0":"")+a};c.handleDealHasEnded=function(b){a.$(e.PANE_ACCESSORY_ADD_SUCCESS_PREFIX+b).hasClass("aok-hidden")&&(a.$("#attach-accessory-asin-"+(b+1)).parent().addClass("lightning-deal-ended"),a.$("#attach-accessory-deal-on-waitlist-"+b).addClass("aok-hidden"),a.$("#attach-accessory-deal-has-ended-"+
b).removeClass("aok-hidden"))};c.updateLightningDealTimeToCheckoutTimer=function(b){var d=a.$("#attach-accessory-time-to-checkout-"+b).val()-1;a.$("#attach-accessory-time-to-checkout-"+b).val(d);var f=c.convertTimeLeftToString(d);a.$("#attach-accessory-time-to-checkout-string-"+b).text(f);0===d?(a.$("#attach-accessory-ld-in-cart-details-"+b).addClass("aok-hidden"),a.$(e.PANE_ACCESSORY_ADD_SUCCESS_PREFIX+b).addClass("aok-hidden"),a.$("#tile-add-accessory-badge-"+b).addClass("aok-hidden"),a.$(e.PANE_ACCESSORY_ADD_BUTTON_PREFIX+
b).removeClass("aok-hidden"),a.$("#attach-accessory-deal-availability-details-"+b).removeClass("aok-hidden")):setTimeout(c.updateLightningDealTimeToCheckoutTimer,1E3,b)};c.handleLightningDealAddToCart=function(b,d,e){a.$("#attach_add_accessory-button-row-"+b).addClass("aok-hidden");"INWAITLIST"===e?a.$("#attach-accessory-deal-on-waitlist-"+b).removeClass("aok-hidden"):(a.$("#attach-accessory-deal-availability-details-"+b).addClass("aok-hidden"),a.$("#attach-accessory-time-to-checkout-"+b).val(d/1E3),
c.updateLightningDealTimeToCheckoutTimer(b),a.$("#attach-accessory-ld-in-cart-details-"+b).removeClass("aok-hidden"))};c.initializeLightningDealStatusRefresher=function(d){var f=a.$("#attach-accessory-claim-deal-params-"+d).val(),g=JSON.parse(b.unescapeJson(f));a.$("#attach-accessory-deal-has-ended-"+d).hasClass("aok-hidden")&&(f=[{dealID:g.dealId}],f=JSON.stringify({requestMetadata:{marketplaceID:a.$(e.MARKETPLACE_ID).val(),clientID:"goldbox_udp",sessionID:a.$("#attach-sessionId").val(),customerID:a.$("#attach-customerId").val()},
dealTargets:f,responseSize:"STATUS_ONLY",itemResponseSize:"NONE"}),a.$.ajax({type:"POST",url:"/xa/dealcontent/v2/GetDealStatus",dataType:"json",headers:{"cache-control":"no-cache"},data:f,success:function(a){a=a.dealStatus[g.dealId];var b=Number.MAX_VALUE;a&&c.updateLightningDealInfo(d,a.dealState,a.percentClaimed)&&setTimeout(c.initializeLightningDealStatusRefresher,b<a.msCacheTtl?b:3E4,d)}}))};c.updateLightningDealInfo=function(b,d,e){if("AVAILABLE"!==d&&"WAITLIST"!==d)return c.handleDealHasEnded(b),
!1;var f=a.$("#attach_add_accessory_button_"+b+"-announce");"WAITLIST"===d?f.html(a.$("#attach-accessory-join-waitlist-string").html()):"AVAILABLE"===d&&f.html(a.$("#attach-accessory-add-to-cart-string").html());a.$("#attach-accessory-percent-claimed-"+b).text(e);a.$("#attach-accessory-deal-progress-bar-width-"+b).width(e+"%");return!0};return c});"use strict";q.when("A","attach-common","attach-weblabs").register("attach-desktop-side-sheet",function(a,b,h){var f={},g=[],p=-1,c,d,k,n,l,q=f.Selectors=
{PLACEHOLDER:"#attach-dss-placeholder",SHEET:"#attach-desktop-sideSheet",LIGHTBOX:"#attach-popover-lgtbox.attach-popover"};f.transitionDuration=500;f.onKeyDown=function(a){27===a.which&&f.next()};f.initialize=function(){g=[];b.elementExists(q.SHEET)?f.$container=a.$(q.SHEET):(f.$container=a.$('\x3cdiv id\x3d"attach-desktop-sideSheet" class\x3d"a-section attach-desktop-sideSheet"\x3e\x3c/div\x3e'),f.$container.addClass("aok-hidden"),f.$container.appendTo(q.PLACEHOLDER));b.elementExists(q.LIGHTBOX)||
(n=a.$("\x3cdiv id\x3d'attach-popover-lgtbox' class\x3d'a-declarative attach-popover a-modal' data-action\x3d'a-popover-floating-close' style\x3d'z-index: 1008; opacity: 0.4; cursor: pointer'\x3e\x3c/div\x3e"),n.hide(),n.appendTo(q.PLACEHOLDER),n.click(f.next));a.$(document).unbind("keydown",f.onKeyDown);a.$(document).keydown(f.onKeyDown);c=function(){};d=function(){};k=!0};f.setFailureHandler=function(a){c=a};f.setCloseHandler=function(a){d=a};f.fail=function(a,b){c(a,b)};f.addPane=function(a){g.push(a)};
f.removePane=function(a){a=g.indexOf(a);-1<a&&g.splice(a,1)};f.next=function(){p+1===g.length?(n.hide(),f.$container.animate({right:l},{duration:f.transitionDuration,complete:function(){g[p].hide();p=-1;d()}}),r.ue&&r.ue.count&&r.ue.count("ATTACH_DSS_CLOSE_ACCESSORY_PANE",(r.ue.count("ATTACH_DSS_CLOSE_ACCESSORY_PANE")||0)+1),a.trigger("HIDE_SIDE_SHEET")):-1!==p&&(g[p].hide(),g[p+1].show(),p+=1)};f.show=function(){if(k){k=!1;var b=a.$.map(g,function(a){return a.load(f)});a.$.when.apply(a.$,b).fail(f.fail).done(function(){a.$.each(g,
function(a,b){b.setup(f)});f.show()})}else p=0,g[p].show(),l=f.$container.css("right"),f.$container.removeClass("aok-hidden"),f.$container.animate({right:"0"},f.transitionDuration,"linear"),n.show(),r.ue&&r.ue.count&&(b=a.$("#attach-customerId").val()?"ATTACH_DSS_SHOW_HAS_CUSTOMER_ID":"ATTACH_DSS_SHOW_NO_CUSTOMER_ID",r.ue.count(b,(r.ue.count(b)||0)+1),b="true"===a.$("#attach-is-prime-member").val()?"ATTACH_DSS_IS_PRIME_MEMBER":"ATTACH_DSS_IS_NOT_PRIME_MEMBER",r.ue.count(b,(r.ue.count(b)||0)+1))};
f.isEmpty=function(){return 0===g.length};return f});"use strict";q.when("A","attach-common","attach-weblabs","attach-logging","attach-maple","attach-desktop-warranty-pane","attach-desktop-accessories-pane","attach-desktop-tradein-pane","attach-desktop-side-sheet","attach-variant-registration").register("attach-desktop",function(a,b,h,f,g,p,c,d,k,n){var l={},w,t=r.ue,e=!0,v=l.Events={ATTACH_ATC_CLICK_NAMESPACE:"click.attachDSS",WARRANTY_SI_CLICK_NAMESPACE:"click.siatc",VAS_SI_CLICK_NAMESPACE:"click.lsatc"},
m=l.Endpoints={ERROR_500_URL:"/gp/errors/500.html",WARRANTY_SI_CHECK:"/gp/si/util/is-si-with-triggers.html",GET_TREATMENT_AND_RECORD_WEBLABS:"/gp/product/features/aloha-ppd/getTreatmentAndRecordWeblabs.html"},u=l.Selectors={ADD_TO_CART_BUTTON:"#add-to-cart-button",INSTALLMENTS_BUTTON:"#installments-button",ASIN:"#ASIN",QUANTITY:"#quantity",BASE_ITEM_PRICE_DECIMAL:"#attach-base-product-price",BASE_ITEM_CURRENCY_SYMBOL:"#attach-base-product-currency-symbol",ATTACH_ASIN_LIST:"#attach-asin-list",ATTACH_MARKETPLACE_ID:"#attach-marketplaceId",
ATTACH_BASE_ASIN:"#attach-baseAsin",MBB_WARRANTY_ITEM:"#abbWrapper .abbListItem input[type\x3dcheckbox]"},x=l.Classes={ATTACH_DSS_ATC:"attach-dss-atc"};l.initialize=function(){if(!b.elementExists(k.Selectors.PLACEHOLDER)){if(0===h.getAllWeblabsToTriggerClientSide().length)return!1;e=!1}l.setupDependencies();l.setupSideSheet();l.setupAddToCartButton()};l.setupDependencies=function(){var b=a.$(u.ATTACH_MARKETPLACE_ID).val();f.initialize(f.FEATURES.DSS,b);f.setPayloadBuilder(function(){return{baseAsin:a.$(u.ASIN).val(),
baseItemPriceDecimal:parseFloat(a.$(u.BASE_ITEM_PRICE_DECIMAL).val())||null,baseItemCurrencySymbol:a.$(u.BASE_ITEM_CURRENCY_SYMBOL).val()||null,quantity:Number(a.$(u.QUANTITY).val())||1}});g.initialize();q.when("attach-external-atc-interceptor").execute(function(a){w=a;w.enableModule()})};l.setupSideSheet=function(){k.initialize();k.setFailureHandler(l.failure);k.setCloseHandler(l.setupAddToCartButton);b.customerLoggedIn()&&b.hasTradein()&&l.getIsTradeinDSSEnabled()&&k.addPane(d);!h.isWarrantyPaneSuppressed()&&
b.hasWarranty()?k.addPane(p):c.setShouldIncludeMaple(!0);h.servicesInterstitialDeprecated()&&!b.hasAccessories()||k.addPane(c)};l.setupAddToCartButton=function(){a.$(document.body).delegate(u.ADD_TO_CART_BUTTON,v.ATTACH_ATC_CLICK_NAMESPACE,l.handleAddToCartClick);a.$(u.ADD_TO_CART_BUTTON).prop("type","button").addClass(x.ATTACH_DSS_ATC);h.isInstallmentsDssIntegrationEnabled()?(a.$(document.body).delegate(u.INSTALLMENTS_BUTTON,v.ATTACH_ATC_CLICK_NAMESPACE,l.handleAddToCartClick),a.$(u.INSTALLMENTS_BUTTON).prop("type",
"button").addClass(x.ATTACH_DSS_ATC),a.$(u.INSTALLMENTS_BUTTON).click(function(){t&&t.trigger&&t.trigger("DP_INSTALLMENTS_DSS_231673","T1")})):a.$(u.INSTALLMENTS_BUTTON).click(function(){t&&t.trigger&&t.trigger("DP_INSTALLMENTS_DSS_231673","C")});f.logCount(f.CSM_METRICS.ATTACH_SIDE_SHEET_CLOSE)};l.failure=function(a,c){switch(a){case b.FailureModes.ERROR_500:l.failureError500();break;case b.FailureModes.RESUBMIT_BUY_BOX:l.failureResubmitBuyBox();break;case b.FailureModes.UNBIND_ATC:l.failureUnbindATC();
break;default:case b.FailureModes.TRANSITION_TO_HUC:l.failureTransitionToHUC()}};l.failureError500=function(){r.location=m.ERROR_500_URL};l.failureResubmitBuyBox=function(){l.failureUnbindATC();b.buyButton.click()};l.failureUnbindATC=function(){a.$(document.body).undelegate(u.ADD_TO_CART_BUTTON,v.ATTACH_ATC_CLICK_NAMESPACE);a.$(u.ADD_TO_CART_BUTTON).prop("type","submit");h.isInstallmentsDssIntegrationEnabled()&&(a.$(document.body).undelegate(u.INSTALLMENTS_BUTTON,v.ATTACH_ATC_CLICK_NAMESPACE),a.$(u.INSTALLMENTS_BUTTON).prop("type",
"submit"))};l.failureTransitionToHUC=function(){h.servicesInterstitialDeprecated()?a.$(document.body).undelegate(u.ADD_TO_CART_BUTTON,v.VAS_SI_CLICK_NAMESPACE):a.$(document.body).undelegate(u.ADD_TO_CART_BUTTON,v.WARRANTY_SI_CLICK_NAMESPACE);h.isInstallmentsDssIntegrationEnabled()&&(h.servicesInterstitialDeprecated()?a.$(document.body).undelegate(u.INSTALLMENTS_BUTTON,v.VAS_SI_CLICK_NAMESPACE):a.$(document.body).undelegate(u.INSTALLMENTS_BUTTON,v.WARRANTY_SI_CLICK_NAMESPACE));l.failureResubmitBuyBox()};
l.handleAddToCartClick=function(c){b.buyButton=a.$(c.target);a.$(document.body).undelegate(u.ADD_TO_CART_BUTTON,v.ATTACH_ATC_CLICK_NAMESPACE);h.isInstallmentsDssIntegrationEnabled()&&(a.$(document.body).undelegate(u.INSTALLMENTS_BUTTON,v.ATTACH_ATC_CLICK_NAMESPACE),b.getAtcForm().append(b.buyButton.filter("input").clone().attr("type","hidden")));a.$.when().pipe(l.checkWarranty).pipe(l.checkClientSideWeblabTriggering).pipe(l.checkFeatureExists).pipe(l.show).fail(l.failure);if(e)return c.preventDefault(),
c.stopImmediatePropagation(),!1};l.checkFeatureExists=function(){if(l.shouldSuppressForFeatureNotPresent())return b.reject(b.FailureModes.RESUBMIT_BUY_BOX,{count:"ATTACH_DSS_SUPPRESSED_FEATURE_DOES_NOT_EXIST"})};l.checkWarranty=function(){if(!h.isWarrantyPaneSuppressed())if(l.shouldSuppressForWarrantyInMbb())k.removePane(p),c.setShouldIncludeMaple(!0),f.logCount("ATTACH_DSS_SUPPRESSED_MBB_WARRANTY_CHECKED",1);else if(b.hasWarranty())return a.$.get(m.WARRANTY_SI_CHECK).pipe(l.handleSICheck,l.handleSIFailure)};
l.getIsTradeinDSSEnabled=function(){if(h.isTradeInDSSEnabled())return t&&t.trigger&&t.trigger("CETECH_TRADEIN_ATTACH_DSS_EXPERIMENT_318373","T1"),!0;t&&t.trigger&&t.trigger("CETECH_TRADEIN_ATTACH_DSS_EXPERIMENT_318373","C");return!1};l.checkClientSideWeblabTriggering=function(){h.triggerClientSideWeblabs();if(!h.servicesInterstitialDeprecated()&&!b.elementExists(u.ATTACH_ASIN_LIST))return b.reject(b.FailureModes.UNBIND_ATC,{count:"ATTACH_DSS_SUPPRESSED_EMPTY_ASIN_LIST"})};l.handleSICheck=function(a){if(!a)return b.reject(b.FailureModes.RESUBMIT_BUY_BOX,
{count:"ATTACH_DSS_SUPPRESSED_SI_CHECK_FAILURE"});a.suppressSi&&(k.removePane(p),c.setShouldIncludeMaple(!0),f.logCount("ATTACH_DSS_SUPPRESSED_SI",1))};l.handleSIFailure=function(){return b.reject(b.FailureModes.RESUBMIT_BUY_BOX,{count:"ATTACH_DSS_SUPPRESSED_SI_CHECK_FAILURE"})};l.shouldSuppressForFeatureNotPresent=function(){return h.servicesInterstitialDeprecated()?!b.elementExists(k.Selectors.PLACEHOLDER)||k.isEmpty():!b.elementExists(k.Selectors.PLACEHOLDER)||!b.elementExists(u.ATTACH_ASIN_LIST)||
!b.elementExists(u.ATTACH_MARKETPLACE_ID)||!b.elementExists(u.ATTACH_BASE_ASIN)};l.shouldSuppressForWarrantyInMbb=function(){return 0<a.$(u.MBB_WARRANTY_ITEM).filter(":checked").length};l.show=function(){k.show()};return l});q.when("A","attach-desktop","attach-weblabs","ready").execute("attach-desktop-main",function(a,b,h){b.initialize();a.on("a:pageUpdate",a.debounce(function(){b.initialize();a.trigger("attach:dss:initialized")},300))});"use strict";q.when("A","attach-desktop","dp-util-cookie","cf").execute(function(a,
b,h){"000-0000000-8675309"===a.$("#attach-sessionId").val()&&a.$("#attach-sessionId").val(h("session-id"))});"use strict";q.when("A","attach-logging","ready").register("attach-categorized-cards",function(a,b){var h=self.Selectors={CATEGORIZED_ACCESSORIES_PANE:"#attach-categorized-accessories",CATEGORIZED_ACCESSORIES_SEE_MORE:".category-see-more",CATEGORIZED_ACCESSORIES_SEE_LESS:".category-see-less",CATEGORIZED_CARD_EXPAND_CONTENT:".card-expand-content",CATEGORIZED_CARD_EXPANDABLE:".card-expandable",
CATEGORIZED_CARD_CATEGORY:".card-category"},f=self.Constants={CATEGORY_CARD_EXPANDED:"category-card-expanded",CATEGORY_CARD_PREVIOUSLY_EXPANDED:"category-card-previously-expanded"};self.initializeCategorizedCards=function(){a.$(h.CATEGORIZED_ACCESSORIES_PANE+h.CATEGORIZED_CARD_EXPANDABLE+" "+h.CATEGORIZED_CARD_CATEGORY).each(function(){var g=a.$(this),p=g.find(h.CATEGORIZED_ACCESSORIES_SEE_MORE),c=g.find(h.CATEGORIZED_ACCESSORIES_SEE_LESS),d=g.find(h.CATEGORIZED_CARD_EXPAND_CONTENT);p.show();c.hide();
d.hide();g.removeProp(f.CATEGORY_CARD_EXPANDED);g.removeProp(f.CATEGORY_CARD_PREVIOUSLY_EXPANDED);p.click(function(){p.hide();c.show();d.slideDown(400);g.prop(f.CATEGORY_CARD_EXPANDED,!0);g.parent().animate({scrollTop:g.get(0).offsetTop-30},400);b.logCount(b.CSM_METRICS.ATTACH_SHOW_MORE)});c.click(function(){c.hide();p.show();d.slideUp(400);g.prop(f.CATEGORY_CARD_EXPANDED,!1);b.logCount(b.CSM_METRICS.ATTACH_SHOW_LESS)})})};return self});"use strict";q.when("A","attach-logging").register("attach-secondary-side-sheet",
function(a,b,h){var f=a.$;h={name:"secondary-side-sheet"};var g={},p=h.Utilities={},c,d,k=h.AuiConstants={AUI_SPINNER:".a-spinner-wrapper",AOK_HIDDEN:"aok-hidden"},n=h.Htmltags={LI:"li",IMG:"img",IMG_SRC:"src",IMG_ALT:"alt",INPUT:"input",DATA_ASININDEX:"asinindex"},l=h.CssProsVal={CSS_DISPLAY:"display",CSS_DISPLAY_INLINE_BLOCK:"inline-block",CSS_WIDTH:"width",CSS_HEIGHT:"height"},q=h.Declarative={ATTACH_ACCESSORY_MINI_DP:"attach_accessory_mini_dp",MINI_DP_ATC:"mini_dp_add_to_cart",MINI_DP_BACK_BUTTON:"mini_dp_back_button",
MINI_DP_NO_THANKS:"mini_dp_no_thanks"},t=h.Events={UPSELL_ASIN_ADDED_TO_CART:"UPSELL_ASIN_ADDED_TO_CART",UPSELL_ASIN_NOT_ADDED_TO_CART:"UPSELL_ASIN_NOT_ADDED_TO_CART",HIDE_SIDE_SHEET:"HIDE_SIDE_SHEET",CLICK:"click",ATTACH_LOADED_ACCESSORIES_PANE_SUCCESSFULLY:"LOADED_ACCESSORIES_PANE_SUCCESSFULLY",RESET_SECONDARY_SIDE_SHEET_MODULE:"RESET_SECONDARY_SIDE_SHEET_MODULE"},e=h.Selectors={PANE_ACCESORIES_CARD:"#attach-accessories",PANE_ACCESSORY_ADD_BUTTON_PREFIX:"#attach_add_accessory_button_",PANE_ACCESSORY_ADD_SUCCESS_PREFIX:"#attach_add_accessory_alert_",
PANE_ACCESSORY_ADD_ERROR_PREFIX:"#attach_add_accessory_error_",PANE_ACCESSORY_DISPLAY_ROW:".attach-accessory-display-row",PANE_CATEGORIZED_ACCESSORIES_CARD:"#attach-categorized-accessories",BASE_ASIN:"#ASIN",SECONDARY_SIDE_SHEET:".secondary-side-sheet",BACK_BUTTON:".back-button",MINI_DP_VIEW:".miniDp-view",MINI_DP_RESPONSE:".miniDpResponse",ASIN_TITLE:".asin-title",ASIN_REVIEW:".asin-review",ASIN_REVIEW_ROW:".asin-review-row",PRICE_OFFER_ROW:".price-offer-row",ASIN_OFFER_PRICE:".asinOfferPrice",PRODUCT_IMAGE_MAIN:".productImageMain",
PRODUCT_IMAGES_LIST:".productImagesList",FEATURE_BULLET_POINTS:".featureBulletPoints",MINI_DP_PRODUCT_FEATURES:".mini_dp_product_features",MINI_DP_IMG_THUMBNAIL_LIST:".imgThumbnailList",MINI_DP_ACTION_BUTTONS:".miniDp_action_buttons",MINI_DP_ACTION_BUTTONS_STATES:".miniDp-action-buttons-states",MINI_DP_ADD_ACCESSORY_ALERT:"#miniDp_attach_add_accessory_alert",MINI_DP_ADD_ACCESSORY_ERROR:"#miniDp_attach_add_accessory_error",MINI_DP_ADD_TO_CART_RETRY:".attach-add-to-cart-retry"},r=h.RefTags={MINI_DP_SUCCESSFUL_LOAD:"dp_atch_dss_ss_ce_",
MINI_DP_ADD_ACCESSORY_CLICK:"dp_atch_dss_atc_ce_",MINI_DP_BACK_BUTTON_CLICK:"dp_atch_dss_ss_back_ce_",MINI_DP_NO_THANKS_CLICK:"dp_atch_dss_ss_nt_ce_",MINI_DP_ADD_TO_CART_SUCCESS:"dp_atch_dss_atc_success_ce_",MINI_DP_ADD_TO_CART_FAILURE:"dp_atch_dss_atc_fail_ce_"},m=h.MiniDpAjax={MINI_DP_AJAX_ENDPOINT:"/gp/product/features/aloha-ppd/udp-ajax-handler/minidp.html?",MINI_DP_AJAX_TAB:"\x26activeTab\x3d0",TEXT_STATUS_SUCCESS:200};p.showHideSpinner=function(b){b?a.$(k.AUI_SPINNER).show():a.$(k.AUI_SPINNER).hide()};
p.isCategoryView=function(){return a.$(e.PANE_CATEGORIZED_ACCESSORIES_CARD).length?!0:!1};p.showSecondarySideSheet=function(b){b?(p.isCategoryView()?a.$(e.PANE_CATEGORIZED_ACCESSORIES_CARD).hide():a.$(e.PANE_ACCESORIES_CARD).hide(),a.$(e.SECONDARY_SIDE_SHEET).slideDown(1E3),p.showHideSpinner(!0),a.$(e.BACK_BUTTON).show(),a.$(e.SECONDARY_SIDE_SHEET+" "+e.MINI_DP_VIEW).hide()):(p.isCategoryView()?a.$(e.PANE_CATEGORIZED_ACCESSORIES_CARD).slideDown(2E3):a.$(e.PANE_ACCESORIES_CARD).slideDown(2E3),a.$(e.BACK_BUTTON).hide(),
a.$(e.SECONDARY_SIDE_SHEET).hide())};h.init=function(){a.declarative(q.ATTACH_ACCESSORY_MINI_DP,t.CLICK,function(h){function A(){f(e.MINI_DP_VIEW+" "+e.MINI_DP_IMG_THUMBNAIL_LIST+" "+n.LI).hover(function(a){a=f(this).find(n.IMG).attr(n.IMG_SRC);f(e.MINI_DP_VIEW+" "+e.PRODUCT_IMAGE_MAIN+" "+n.IMG).attr(n.IMG_SRC,a);b.logCount(b.CSM_METRICS.MINI_DP_CAROUSEL_THUMBNAIL_CHANGE)})}function D(){p.showSecondarySideSheet(!1);var c=f(e.SECONDARY_SIDE_SHEET).data(n.DATA_ASININDEX);c in g||(a.$(e.PANE_ACCESSORY_ADD_BUTTON_PREFIX+
c).find(n.INPUT).click(),g[c]=!0,b.logSecondarySheetRefTag(r.MINI_DP_ADD_ACCESSORY_CLICK+z+"_"+y.upsellasin),b.logCount(b.CSM_METRICS.MINI_DP_ATC),b.endLatencyCapture(b.CSM_METRICS.MINI_DP_DWELL_TIME))}function E(){var a=f(e.PANE_ACCESSORY_ADD_SUCCESS_PREFIX+z).css(l.CSS_DISPLAY),b=f(e.PANE_ACCESSORY_ADD_ERROR_PREFIX+z).css(l.CSS_DISPLAY);a===l.CSS_DISPLAY_INLINE_BLOCK?(f(e.MINI_DP_ACTION_BUTTONS_STATES+" "+e.MINI_DP_ADD_ACCESSORY_ALERT).removeClass(k.AOK_HIDDEN),f(e.MINI_DP_ACTION_BUTTONS_STATES+
" "+e.MINI_DP_ADD_ACCESSORY_ERROR).addClass(k.AOK_HIDDEN),f(e.MINI_DP_ACTION_BUTTONS).addClass(k.AOK_HIDDEN)):b===l.CSS_DISPLAY_INLINE_BLOCK?(f(e.MINI_DP_ACTION_BUTTONS_STATES+" "+e.MINI_DP_ADD_ACCESSORY_ERROR).removeClass(k.AOK_HIDDEN),f(e.MINI_DP_ACTION_BUTTONS_STATES+" "+e.MINI_DP_ADD_ACCESSORY_ALERT).addClass(k.AOK_HIDDEN),f(e.MINI_DP_ACTION_BUTTONS).addClass(k.AOK_HIDDEN)):(f(e.MINI_DP_ACTION_BUTTONS_STATES+" "+e.MINI_DP_ADD_ACCESSORY_ALERT).addClass(k.AOK_HIDDEN),f(e.MINI_DP_ACTION_BUTTONS_STATES+
" "+e.MINI_DP_ADD_ACCESSORY_ERROR).addClass(k.AOK_HIDDEN),f(e.MINI_DP_ACTION_BUTTONS).removeClass(k.AOK_HIDDEN))}function F(){a.$(e.MINI_DP_VIEW+" "+e.ASIN_TITLE).html(G);a.$(e.MINI_DP_VIEW+" "+e.ASIN_REVIEW).html(H);a.$(e.MINI_DP_VIEW+" "+e.PRICE_OFFER_ROW).html(C);a.$(e.MINI_DP_VIEW+" "+e.ASIN_OFFER_PRICE).html(I);var b=a.$(e.MINI_DP_RESPONSE+" "+e.PRODUCT_IMAGES_LIST+" "+n.LI+" "+n.IMG),b=a.$(b).map(function(){return a.$(this).attr(n.IMG_SRC)});f(e.MINI_DP_VIEW+" "+e.PRODUCT_IMAGE_MAIN+" "+n.IMG).attr(n.IMG_SRC,
b[0]);f(e.MINI_DP_VIEW+" "+e.PRODUCT_IMAGE_MAIN+" "+n.IMG).attr(n.IMG_ALT,b[0]);b=f(e.MINI_DP_RESPONSE+" "+e.PRODUCT_IMAGES_LIST).clone();f(e.MINI_DP_VIEW+" "+e.MINI_DP_IMG_THUMBNAIL_LIST).html(b[0]);A();f(e.MINI_DP_VIEW+" "+e.MINI_DP_IMG_THUMBNAIL_LIST+" "+n.IMG).each(function(){f(this).removeAttr(l.CSS_WIDTH).removeAttr(l.CSS_HEIGHT)});b=f(e.MINI_DP_RESPONSE+" "+e.FEATURE_BULLET_POINTS).clone();f(e.MINI_DP_VIEW+" "+e.MINI_DP_PRODUCT_FEATURES).html(b);E()}a.$(h.$target).attr("id");var B=a.$(h.$target).parent();
h=a.$(h.$target).closest(e.PANE_ACCESSORY_DISPLAY_ROW);var y=a.$(B).data(q.ATTACH_ACCESSORY_MINI_DP),G=y.title,H=a.$(h).find(e.ASIN_REVIEW_ROW).html(),C=a.$(h).find(e.PRICE_OFFER_ROW).html(),I=y.offerprice,z=y.asinIndex,B=y.marketplaceid;d=z;c=y.upsellasin;f(e.SECONDARY_SIDE_SHEET).data(n.DATA_ASININDEX,z);p.showSecondarySideSheet(!0);b.logCount(b.CSM_METRICS.MINI_DP_OPEN);b.beginLatencyCapture(b.CSM_METRICS.MINI_DP_DWELL_TIME);a.ajax(m.MINI_DP_AJAX_ENDPOINT+"asin\x3d"+y.upsellasin+"\x26marketplaceId\x3d"+
B+"\x26offerId\x3d"+y.offerlistingid+m.MINI_DP_AJAX_TAB,{method:"get",success:function(c,d,g){g.http.status===m.TEXT_STATUS_SUCCESS&&c!==x&&(a.$(e.SECONDARY_SIDE_SHEET+" "+e.MINI_DP_RESPONSE).html(c),F(),p.showHideSpinner(!1),a.$(e.SECONDARY_SIDE_SHEET+" "+e.MINI_DP_VIEW).show());a.declarative(q.MINI_DP_ATC,t.CLICK,D);f(e.MINI_DP_VIEW+" "+e.MINI_DP_ADD_TO_CART_RETRY).unbind(t.CLICK).bind(t.CLICK,D);b.logSecondarySheetRefTag(r.MINI_DP_SUCCESSFUL_LOAD+z+"_"+y.upsellasin)},error:function(a,b,c){p.showSecondarySideSheet(!1)}})});
a.declarative(q.MINI_DP_BACK_BUTTON,t.CLICK,function(a){p.showSecondarySideSheet(!1);b.logSecondarySheetRefTag(r.MINI_DP_BACK_BUTTON_CLICK+d+"_"+c);b.logCount(b.CSM_METRICS.MINI_DP_BACK);b.endLatencyCapture(b.CSM_METRICS.MINI_DP_DWELL_TIME)});a.declarative(q.MINI_DP_NO_THANKS,t.CLICK,function(a){p.showSecondarySideSheet(!1);b.logSecondarySheetRefTag(r.MINI_DP_NO_THANKS_CLICK+d+"_"+c);b.logCount(b.CSM_METRICS.MINI_DP_CANCEL);b.endLatencyCapture(b.CSM_METRICS.MINI_DP_DWELL_TIME)});a.on(t.UPSELL_ASIN_ADDED_TO_CART,
function(a){a in g||(g[a]=!0);b.logSecondarySheetRefTag(r.MINI_DP_ADD_TO_CART_SUCCESS+d+"_"+c);b.endLatencyCapture(b.CSM_METRICS.ATTACH_UPSELL_ATC_LATENCY)});a.on(t.UPSELL_ASIN_NOT_ADDED_TO_CART,function(a){a in g&&delete g[a];b.logSecondarySheetRefTag(r.MINI_DP_ADD_TO_CART_FAILURE+d+"_"+c)});a.on(t.HIDE_SIDE_SHEET,function(){p.showSecondarySideSheet(!1)})};h.resetSecondarySideSheet=function(){g={}};a.on(t.ATTACH_LOADED_ACCESSORIES_PANE_SUCCESSFULLY,h.init);a.on(t.RESET_SECONDARY_SIDE_SHEET_MODULE,
h.resetSecondarySideSheet);return h})});